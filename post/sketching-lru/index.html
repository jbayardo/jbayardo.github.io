<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #42464c;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #42464c;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #FFFFFF;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"de2183b20850ce2b05ce02cd10acb4a4a3d6e138dc80aa1c52eadabbe43ff66a10569e452693fdbddc3aeea3e4035c2d752e61f92ddb43610ef05416589dec14db7fe51d4231bff74d4ef224e8b1a5bbf08f9afc1d775f2a4a43f9853ef7fcac928281c3a53e248b9e19ecfc6d31f9a5c613b9d9637b5a12a9215b146fe825ccc1d3a6827704ee03dfb8e93c115d63612067b6c09c53353f00654e305a685314eb890618793d53c6ab1ab9826b782e04f34ff7f5745313cf79d950f369207907fc3608dece86885cb0258ff95ef7e17893778edde019997d82b7b73ec2cce7bead17c99dc2b4f96a45855c65ce82f2b2603fd99cbdec8195e98a442b8a889dd277fb541b25540832e3272813171a87ff26c781a3a4a4160ba98f78b87e7becfb4c2bfe7c92d73093b4081c7b25b1686c4337bcf1d3c027d22b1ca00957bcd895a79172a69124081ad82b9038126747c9a48157c316353072f36f34b1aa44cb0e287024e580c9af638400959fa8e36243db693adc4f762eb79c7eb92903c6c8a7d3dda937cf59a9e6f7866f22b4c716a37f4ffabf15833c2c9511efd69b820e4f8d3e6e6b4337efe1df4eabe330a5b89cecb1d39e8b50d3be7a441e516254169b6076aef6d2909b6e50a3d962dd0697109ac1d475da7a556f208ec15da30e0b2cb83f1e3f3cf5f913e7cf1a26fac898fce6fabf65b80a73e4a44b6ab6b80ba112a5c327a5465c6463081cb6830dff0d31a138704354e8fd868b209b1225a44cff80af831a08e65ac0317c87c745261b8a150297655af5af4fccf4ab694c06a75c07cb900366f5dc88cd297794978580d9703d43b0fc2390c1ec79ac8b924a0bb8a22ac121556231b82c43cd70b59c47592e7f5c7f035e23901f3f15d86a79887cf2c0ee9e414c9764cbe7309629072241df0ea7101be1c919428cf4dbb417b51b908b297042d5cc2861f424d62553bcc6e133e3cbbee7a0ad6e2206e088fe30f14b630716792ad7ad0e4cf476ee1f1f2e22c003839ebd6a11b505a7db5be0ae9b92bb237ecbe415b0bdc808b27a681b6fe29bd32ab38e122ec694ab7d772bdfb63f54bb660bbdc3d2a871bb8c0cfff7ca13b44669fb476400d50fd459e7d93fd818919158dfae037a080d7c8fe3171b7815931f9a5f773f8cd5208203fb6935d65afe03684361e8387a07e5fba207c10ba27e3d93f4f9efc6af27801d0451c3b30f7841e1da279da23350e44b1a3dd60c270a261c2412f6b77f1fced8e19456e6ad0f45677fb358edf6d1d11c7968a3808002b654d4d59804e71e6efd5ddc518b378a0b8343d4d9f5ac986d3f7ef53aa39705e91bbec581f6a9ecb5b3b2bc22fbdf284a9486138c686cf8d501e18dfbbb148bb765416d6613e3f5e2009d3fb10431229c869fe597cf33fe292494743dc15ff516377f75ebba785e8f40b524ba71ee5ae701d4717a4b4f8119f1b8bf1509faa0ff653a32a51b0b5b4c180bcfc7fbb70802d4f15606a5219040398d42004f4ed53fe49d90ca927d9f870188dee8641bd09f17efa0167e026b2791677f7eb79362cb409d12a74098dea8669234e3eb2460fda2a896f13c83386679190afc2a6e8ac2c0457797b92404dfcdc209e08c8640dc2c058f0f67b8c7f917361b27106536ad3c35e9eb51ea7abbae4799971329c44b900a63dfae0c655b6a3002098d69a66bd3d5de69fa8c8354d1437a00f453c9cdf9138490bb056ffe65ca4e253a8dd36dc1e0a45240ad830cfe98fb30e70d15b493136854461c0ff9275258f927dbc9613b154dd689ea7fbfa6d91dc6b9147c97e0c585635bba8b52340795c234c1c080a33b459c30da13e31e2f031446b46de635d1219599b53e8e3cf4496fcd6f1397f5e9226f5f433c2308405733f3ef19162a422cffa3201bde5432479a7ab989dbf0beefdb40e1924509464d8f576e951eba1192e649aea090065321c180ac20dc346d2df10cbb162d222237fec8f4c7fe9f682bfa4c432d36baea77b2a74b903c57affcd51fdbeb870e95a5ada8b1346d6411a3dd92e5ebd6f93769a54625920f03a35096d941b128808553cbe2f72f1fc639e02224576f214d354ad3fd6de1a7d82b8cc8d3bf5eaacc567fdd806c09da1b8f52a9e118dd1641f11ac9ec706af1e43b810b362d707eee193fc27645c4809b7633887596adc30bf1e34f65ad094a74423b56e8e4cb5331f4768a6e7460a069059549b1c7482c5d3c2b9f2b6366877bb1af5a03e2176dc29606e0a4e2134c6fa67c47dd409edd9e271bc5ea0a940d8aacde19143f44ed7c1fdcfb7cbb2a4bc6de6300745bd1c4c26a692dea4a1e1c4c95f9af40b3f900d88e3162ecae851b65468b6e9e9d87ee3412cfb7b09e60cb7fac255a4f38fdd9002c048e28f7fe4b8c7f975e5f4dc26bbd233c48e3a8edeadaaa7b033246b722b5c471e0cf32b82f8c0cbdd557a5c75533da0ef14bf6030e73ac14456dd46b94df591a1ce8671288103c0b5982bda1de1e49ed56c2886deeaecbb30c0b05a4df3f430b96755c643111bcf7e934bebb89aae1ccc566c2a4ea98be7ca1d92e1395aeda469aa8e39153120d8d29b132bcd4f7013bc27b3b3e7fa8391d466038117b709e7c07d6a0111bf30d6acc6186fcee41400666bb6f46ad14d6d7e83ba97241eeb48c0394f0c016a2e6c1337edd258b062a9c983326a90a14b719270b8a2cde41584a8d26d3e1710cc032e2433567be9266f7cba7555199e8ce661f7c91a8925d3eb211afd721e73485882136d3876127483cadbd335f9fd5f1bf82a666da42579c1e2c03458ee8b92d21708fb10b54757083f993718db561e430ca03e0ed454bd6f14c7503ffbf4585114815be780571c281f0a524e002de1372573fb4b995c747484eee5a978a27ac2d2b304a502856b7a61a9483313b40fcf407888d6f2483091b14262dab0454acc6170d234c5dea062c7f348232cb91c2deb567770301e3b7c7c3c6b8fc0af9c3fb4b9016a176b78ecd9a922b2c50d411e8d27dff97b81352f1f330e80aef0a28d4a306b9793d63a5932f9e0a90043efc3a80289d4a0633d5b396850f5f8ecad2bb5827776740703e1c69caa3b839ef88d5a7e28a733c6ebe2cb79644b0f6869a829ad6341ce15c02d83741a95c88a03a1fbb82898b4b67bf63b0b19fb052172f0cba24bd58eebd7ecf384499828bcd8bad530d14927b6e8088ca05d687a1af041569f93190cbbf3d22986b7f2d7621c894aa70135a41c11d01187a2cd373d85a876aa4560cc4cbb929cf361cc35fae9030a44693d39795e72f90eed920daeb6755093a9cc55faba70b9b0cc52e2fec71551b99ba9e6b5f679a1177f63b9257da3cdb27050b34a13fe24c383c50f600c7308e1e3767f7e3a32cc0c7fdef637be28ea5d15e5c3d993f1df7c1942d7770ce154517cec74d1706112bbf97c47e8e1fdf2abe971a4b100807b1a14d66a9ddafcc39235d8ba418de5362ae33cb83f724b8991896453b5ab647fb4cea626e93f8afc686d912b0ba5fb5e62a9e0310e590bc0755c76c87983f62ba1d52a0cd9ca925673a5e1f4984fd9d0e4e976726cf204ce4e3bcf49e3fa6d8bf0be144b7c777f416f3362f1bfdf6736a2b0ead028e5977bd0f5a8e794fb379357cff1e5b89c0774a12bccefdcefb3dee92caeb4032ac53280ccaa675750c75ad151b99ddf473c9b6ef90ecd05aac4ea394876f2f2a8855c7edee2ebfdb4431f5e552765efd8ac02cbae234ca64f91fe9e172e83bbad95cd64d7e41ed424bd57793cafe6d92b32f15287029dd5fb76f45a62cf8ecac768e6d725123d5effb7b4af9ab24b2b4e38edcc117c2c4aab37dcfe6b32ce636e9b39a4b7e9c14de3bc40ae3dc33295e903a07b928a8c43ed78366c796f50abe0b3df9a12ee6523512bd730ea8ba81583a59ffc6806f0be44212df18173d689753f030df6882847ca94afb43e4ee57d177323d870d487658cc40979fb58668756493c6f69c24bfe30e63ac01cee77c7e16c4fb14daf1f08fea40637c121f59dced79b70be1fb58010e5aca580ad3c664a1bee5d507882e8a3053a56ad2cff03029dd7f4d48352127c4e42d39f3ea141c27a44c5bb5f3ac597e4a802359515145edd14920aab24c04d81701fab9f1e0c11513d2fa9c4fb1289aa128e409f3497b53f0e287b8079a594706ad9b75d97b1c0eacd2d311c471e407b6a22caf7ad43815b1f7af2655a8584685d312903985ce838e37cef27596306e766598c7905f602ff9d83fba74f6d21c658a2909c5d9bf58a104fc2c511315456cd1540d41b0dc96ce7b927dfed0938649c1aea2f628daea2b7e9700e187c37edcd37aa050391c5a1c9b0677c4baf2ba1390db369b1057004492e1d0a6191b3db8a88c4031272df44211ab27f0b71e2078d26bda081d85a68557524887a559351a9495c9a56948892849f7c7e2df205544078c763a1e6e55b49cd1d1c6fee3a179e3cd5557bc1606326d3c2018dbe3aba6e039a97c383e625c6cf5ddbdb7838759838eae96976e0502d8f3f825b01aa92ef80da77e67ddc69263c813996af0ad7ce079346bf5703d65314d246cb5343592ba6902d32c854f12b47b97a43187347eb6598b8fe6584afb992820936add7d559e37fd02fbd02daa81afa06605a10f7043517b5b81d8a834a8db946b5c9229ccb02fc36f8afb32208dce3e3e101f036476c4a8b504e0daa266a4ba6507579d65e749ad2f7ba1fa6a4d9997d3fb88eb945ababa1187df6c0e69127c487789c1e83765bcfae0b531fce8a424227c354485e009a7078b76d7feb30299b1afc7da7b7e2bf8b60b2ab101d73ab472e321648a6fcc0172139887cfe1d4ae92af2f46f43e3e7c9ec192c4104af074404d7b6f35eda7f235b6092f1825e373d4a857c2bff31c185ad2846533205786fbd1aa003daf448d56c852509011327f7b90240186f10028d58e574ac326b1c5234ccfe269211cd27f4d94c66030fd484261181842cca47cf5afc5a6ec5f13eb7a32204257bc7fe3438532ca7f85683d9755900b1d8f79f5f84a97342f3764e740ea2b2ac317f70cdd17543b302b24072995abe85569b977efac18484992efcb27a7381956f13257614be16711f16b2f4d7904cd9e2697f793d6cd58779e517f023695fd8d639d6a87152e23634c86d649850c25fda6bc744bbcf8cd2476db7b094d8844bba6aa84d7fa82335c3bcc668e3e578c0b321e65253698fd5292bbbdac2c86ccd29228513f50fbdf8dc8f6c9c7cb810fac422b60cb16b802f623f27a857b112dc4e7772e8161bb356497c993300f8fed35fd3ab088b2c15000b482bfe56cc5e0225fa66cfc6a49c555b6d413ae0be91d21e09cefda95268cf71c0ccf0a749586e78f12e66527470cbb15fe3e113fa7c0f7fff38429f8a1ad79bc8467e50fe7cb259642e29a8809e963e2e50f0c74677c2c160b19cdda18a492f546a6f8c74c82fe4002d8102d3224cd6eb63f19869aef9df7332cf9273d0f1760eefd05038f30e12aaf8451b76c6f6451baa4a8fcb10f68c3b80e5552495f46e51b5d91d422e032faea54e669bc2017239b08210e0ac3ff3a5fd067bdc17fb0a382f6bd93f9a5c703462a84daa0883c8230807e94c233219c37420045dbfbd69f0a4211f02c365c25aa0295622717022d20d43240445a2ac2f708fb04e54f4f5a5d620d27f4ba95bb8e89f6d2de88cf7bc051249d627d23e83856f3a5b1dd900e65a7ebe142fcc3154e345d1b9988597b5941dab8a7bc2cd4d2ceabfeba12b84d1de726b63cc63764d1dbd2079618f698ca3b8e8fdd42a59ce7554bf42808d6239b699939c323cb8279fcd17c0fcf5fdbf8f6a5028320c06db0cc8a6bfdd10a10392e70398a1b92724c2a9ae24d730997515ebd7ee9e72182ae181b2339987325a43e82e37abbc8b73015c7e16113dbbffdbd4c4b9f6f5f09ef20ffde3cd6e5d8899e8c31cad9d7090e33e0444bb64d8f0cf7ff44e27c7f29320761abebdcfd31dab54b528653baae0af08197ff7a29891a4a0787295c6df7a55f22c72c3e40a3da8123f70b7902c645f64b3544dc393f9f64be8b6be87bcda3b184375e05335fbd3778a1d773632796c27ccecb77ec5bd92fdcab0c2245321cfbb6ccd73fa328310f6f702ae1c90c1209b4ac42a7245b9d6118b3cf233f0c5bd96285a87359bab6ef75ead32da7a704d924fb3b177f8a3afe073ae5e853fa42ce2f4b4897e54c5bc15f62a5878422657b3cb30b24d9741b9ba83ddfce59e6924b988d917bed80c2508be0d13e96082719f24392c6fd1d6efd0484b4673ee868a62d5ed35dc5f711d1f7b00af50b92795613fbb47f350ca89f5b17d84ddd390829bc738fe2dc3c28723e95b9cc21d2a745a775e68d616df993cef6d7f6bb6c5954d56179ecb426b3cd21748a2c794acf36c0afc973ae9005b7820bcf8daec1ca4bb0165bcfe7fde3956df364b0f16f5b45304421a4d02830867c8ab75445ad83e45aaf2b96c48fc92be6908a849e1c50e348dd0986cba919618935b225210007263028bf1df2ef5f2c930f78ed459d9bbef36c388bb766880885a4fc0c24ea984473af14b448740c15f176ce9692113b9ae66801314ecd14569200eddf0db82f81270d5997ecf5b58b6ad8490c8708e9da7ae9ab0a719f296984a32a334b224b68ebfe8537e47d284c16642a18ac3c95701b0ccefa9c8d1c953ca7ed8f447b327ee10c4fa153d6c79a82383c265195b8035a5d7acb98bbd2ae9e4e68fabe2bfb38a3050839b333a3a1e06aab56f2f1214f7fad8039dcc6a7736a0fcf5b2706198fc44819531f85ff63f4845e7612a799e11ecf76ad647d53b9027e8c0f87df4a769806a13bb67a029479d04e14addd4e29bc825f14907bb6a6dc9ddc4ef0157c707da7174c8d1638a43eda5b5f50ffbbff7ab416ab79334694b521cf08616c921fff14b9872bc2d1bceb7b481a5bf56a673c3873489849e25a770efda78fb30fa67f3df514e0af6660a55bf3b40890a2c913a63d2f70c140472c1d1b794e631e0787d666ffc49aa057775edae7e6cd2372ad4a6f923500d36b9bcb71421e5c419ba8486d90e2a1853210aba6a34b185676f87cc3633855a56f2ae8dfbcafdd1d891e821d2b6c682754c661985eebaecb39400b9dfb860d87780271978ac267058abc2c1b233a79a9e1bb49ec29762fd5b656dc170be58bb87782a409cb8194fe59d2e7a80ffad218f42d2873e32aefa58552ab268a73983dd66d12e478a81fddb8a4f6be0e2b5cb71ea9daa6ef4ea6d5cb8dde0fd8fa9b761b1e9a55a65b6b2a6e03f83b750d065a1066296a688b5a97998439748372ad082d9f58c80bf463b5c3bb4c268c2caaf091991b3d1c9bfc068a96eef23307151d2a63f6fc614523d85d6dd2c5821591753de64045d0270256c2f95fbd27228c048397b0e6ad406dd901ad49b0b6d02a58c9613f8be300507519ee4c99c008001f208f41fd87f59323da4f9bbdf6bd622bc4e161bfb140f7203dedd0aa14e8ffb0f4e5e1b8cd5cd40391c8a849c3c803c3b32824c8a57fda34471d9eb30e66c3fb86e07e4fa14c99ade296ed64162cdf2eaa3264caa0543c5cfdefa7eb85065eab1f350c3821548d22b075555aa6a70cab4e837a6318940b54ae13b89b897133fbf9442b8cb8cb680f1042b6be0b6f355876a2d4023f209a62111e10619913c7ede7d9d7cd37fed73879711caa8e22a00dfb71cc8e989615f22be3f305d0e4225d1411cc7881348cde53266891ea1b44230f9bd6c5ba00ed80406cd650c97815b29c07ffb7f1e9d6c2a3d29f4424dce670374576c821301804e6e9d47c4bf3f2b30f6e3303d52e72123af1f53970746d4401fd4ec8dbe11cec978e01e7e9ac8ed266de2080e5110b45e1b946c29e90ec9eb157a4225639bf3184dd8f7693272c881bc244f51d33daa1892016949031408a9a9903163efc985207c36008e73057ac7a694310030646e536018e6ec6a74dedbd3e3617102d91935d8013d0f91cb5f296a6d78cf60fe07c78f63a862ccaded6ae11e1c2239097849c7dc9b49e4786711d77bca6a4539798686aece71e608d28bc57f284de9a7fdecb1afe71c217e9a1803cdbd4c43aa1accacda11d3f2fbbb894121373bba65a9074bdcc90b214413ac24711afdc9ebbb81a30adf1c7e98f62a238ecbd4bdc990a1d1a237ecbedb9af2d982bbdcff8bae39a00bf207b5585c7263c305d14264f5fd3733f0856630c75734203d713533b89fee34d26302f1040288f85d67783270ab0c63201adbda2f613863d7be68872277b47fb0b3af7e92191f5c2bb772c073a44c1df78b8dac1946f5890f6f20d61429f0e36488b2f3974f274ae4551b9c376aaec2f1ff7db451ebfce31cccc428342eae3588b3148b89b6227549bce78b2ebf75556b030254c98b3421c12b621ef2401c26a490b09317c368be23893446b7d881a85f8ddc6392d3be95e420f2c27dc1fcaac7a7fd337c3e0b3001805b73e2978b01ce9cf72fc0c945c2c7e6b67e1e94530c34381d2db11f26377c3af884f652a7a3a50d3bf181a12c24d46009d807a6583333fb0ca042743f9917e7b16c6188c6d290f710bb5402d9332c775d419911b7cd68c6fe7144b1df2c8684e8a06db5130158fa88bc8a3851062191c77300236c225fdb44dfc066ae2b75d159be95fe35983b5b1ae52cc2ce28a8f8061bf42d069d50b66db3a97d69307e62e74fe3e6c9d6de3d8e89bd5f6925d3b98b26b0d6e20d2e50dbff5b2bf0c7ddf3dad2eb441db930c15b818bbccc7f0b717f36cba60a70120596f8d882ca8b472f32d146148eda0f81553bb5eb5ee20d5884a4bd77e9564a8d5aedce1bb3d02a1e1deb0836b7301d5e68d1f858b45de044c277b0b15e82d2f93c85adfe5237c7536834f414c56966d2ff01a89d1567759242e05d609195a0070d7fbcb3c62b363b434688054d446d5a0b475764ed76196fc94655f7deae3b9ba1fb39a8fb6cfea37fbe2ab748d52c1b88022c1365d9918c3647cb5ad4cfe7031ecea12816bd36118d722cd3a34dcd798bb18bd3508a30cb72daf5f28cd80446cd78453f68b37730b48dde8818e65a48f8990ba96384d535a5c16ef58790b2fd77474926be91e5d39655e2f1df5a87ef0006f6e9cf550baa04fcc0a255c0fb4275282e053c7532f3e985dcad7447a1c6bdd9b84402c9ba08f77126c2d45b75d5d32f8b14b20b729ffe5b76f6cff6495e809d53657dc3f86e5152badf934a571d29a621c25b3947c83a30ca48a16eda7ef394e509254f37e62386c77598ef4011a786a97dc046af4dab1089c29fa55787b203fcc28dcd037197783e3eab7b070939961bb0922bfdebca8fa72a20c329e8fc2ff61dd83d3e1f9a1c0e32c13a93ccb7dd063907a2674f1f7a8fb6f7063a03851821cb1377f8fccc8bb3d00b4d89878a96e1e92dac15162d9002ef1d5209349f693c480c6c9546b21596bb3e4f13aa548c6fc52aa099a073cf3e018a7aae50eff4f39649e5a2306ffbde4f575780494b14782b7df989cec38f6c46cfbf95cf4ff2c0ebda62cded63e874e28dc79e0e168f85f31ff291b0b5abc2143a24d89c60af9cbf03abf82946d2e22226084bb74f18aee4b20c6f2f2e95474a82df82dc12570486a5deb151db0f41373b7b5946e0b370f21b9d5bb2f2aca2106230135a6d55791adefa5d5de890f7d35153fe53e154db3bcbdda17ec29ecee1d4f92c204752a46385302cd6b6c0042eab81e5e701516167a5afdf6d6e06cb941e50736bada49e03e1b374a33f735c7d9b2d0aa3fd21a8de3da0d17253e3ec88aa68d3e00ba2af0746a0c740493076f2d66552e8c053c61209211b10f99dfd2ed2d471a6fc20ff2852f53a1bfd25637a1e70331e446fe3c04c5cc041299046229a93b936a986e00f51bb0a6f171d97f975c49252cfec7d329ea7d5cd8e78c0160e346939857e47c6be1cdd7109909e54529742a7c63bc421995b5664cae12f9b298c7434fcc5a717d7c8446e40707c3514144305f159b4365d1006902a6e1ebccdcbb360ec4ac3707990979c3707c027e3886391065c46cc07bd10588e75d7552333e6e245c11793b5e644d75c260c60bd8fc6f63450a0b3ae5669ac2250383273ba4e15c1f017116c86a17ce60bae088dd9eac23acc3f4675302be0bb8c57089959075f5468b778c92603fea3caf22cfedbc45e41a6a06b78c16263d24e6c86d4c5157054e5970c90deb321d630daf91365844d855ad2ec53ecc4f87cd5be8b7583fc06eb7bf4d12a24ad26444ed4ed67a5765f456f4abaac5c66da752f02ef8f6e42f7ac181e968c9d59c0ebb2b72880246d6036ce3bddabc20a1ce2ebb094a786940e0ae5b121d60190764a2d105f4a8a50cfbf1310bbb9b58f90c7e2783c173f0807172520ea9a19465f35dd8a5d658dad3e34a0b753a14e7773acf0c7cbabd091282bb4ac59da44fdba51ea7f7ba1937357827e554729ea71cfedc7f4186db2ddf5531701eff89d65614447184882ffbe3f54216e28f86d17e018adc1b0cee883301e6a947a140e8a354370f3927914255b2835d9ac535939740fc495b6b25be06111b0047f479bfa9bd39900a37ccce18f2c48903823eeabd08487d5f5a2ff659d5ccbd5ccde42e1b9bcf6a32709ae53436a7c836d4143e1418713b7edcd310daa0fd2c352cb28b0a8bf725d6c10b11f5139db73cc2eff9d439d9687406b21246e71ef31de9844e15fe72479d65c15fd6dc30fe9d63703f98141b532ede8626054b9a33a453a5bc9c64ce157cfb880cb222467c88d1b5d7692651416fb81b1e5e26faf89376097a1069301dd06549744ef515090b5724e4fa569bdafe8a3d7c92e1a86321958a63dcda7520dc07d3e8599c7d01d056a670f617c972a319ec713dbe18620aab80ae432dd50539ac2e962a88c647bb22e95f6d8d444125be8a606db9ed12ec1b3b25c200aa82dd87f038154bebf1e694c4258670458b56e34e218ae1709bd9a51e26d2c746f5744700d2f4014923ec5db340fc9ea13015d28b6539dd1dfc3c2d1008ff5740a36fbd88185affa0c4c5c9c8f421ac2a586d86db9a0be957cc8e9e15c16e1309d56de6a612f796f96393097d6cd39b57b85a383ca70e1b6decdb1aa55346710480045166dee0631f9da2b37047d950d119fcfa56fababd25c831cc8cfbcaa8c6a99b1fefae897b78bbb355eb84a0c14c35de00cd2fe5ca044fed5af54276cf62df155f2dacb46698f474dd7035e0465d61883fd67f5335c2a621c4c18aabc8bf0d45f4ecb57bc59e80f35050d759d2236135a5957f6c3afe001084fbcc17041fe0caa913e931fed7dce86d716168eae6506b65f318950d6e8969d77ddf6353342730823f6276e03a0ff4e6d208d724416811d28b7d3cc50985055d7934c4569138b3314e4542cf5630309ef94aef166e334bb42535caf6c318eccd5eef04640948e981dff66089420b7f8c0046df04934abd2e0be749cdd346f1eed7f2fe66f6163b27941b29f354f70b09538edfae983c29e239eb0a27f855e659d88ae7c1e7860741402a830a94fe3b394975b81c5475bfda3418d26b48c2d355e6d1d86c2f3e3e202ee3140b9ad67d186119584314e0afe98a0059039120d00bf6b2e44b2e3d0c34512bd284a847e5c5f729b5e8455a9df7fcc8378886e11ffb3e848ed42a24669f93edfe239208f478882cb9828fe15c945a55830038ef91917fa0ec9a81efb5f04006f6dcb4dad2251fb92b4f8022dcdf475848227cd7a5ab97657132f788f4ab6c15be5710945121267ef76b6256f4dfa7c5bb6f97e6184e72b0c5d2403ebe6121e6587c2e89ca8803933cee1268ae5b0ad0a54c7d5680b21a9c47ee8a0a9c8ddc1b79d37ae5a828768ea3595286b2e6869e1d2cc681c87d4db8a9ca38b909792bcfaee56b6ab7a7108a09abbde6c647a2d58bab850eae56db04bd2eda6406e1664ccca0539c7a8e4e51dee6f0805d6c43ad90b89ab94d1600d3094d752e6d611527e377876216ea374a0932b3e9aba8196bd46e88accde3765350b1b98ffa4f686ccebd029c2dee05f82697d052df16dd46f31d0d85a2853c4327812f3f2252ab3a30baf2a484f4b4cc91f0f613de026d1b4a9ac6cb39ed01ac1a1061df8fc262b697181b2cafef33f526dd129ea314c15b61c66ae84394858195e24514ab7bf5cfa0d84a714543154a8d895ec48791ab81409d8000e77ed37456f755592b3988f862c402c682d92995caa8e0d673e01b8ea774a03a4ec29989adb4f363f101ef409070132344ea7134a9b4493f043b044d95e4307250b0aa27c953d6269bc6223ea0e7e5c0fe97ccf8bd0722d4a608b5aaafac7b69612b832c6ef1924ffbd690cbe0675f22962c9db01e0a218c8899c6a98ad1e81a02bb4851637b404452e740bcf3800b5a345ab7add1abd520a9aa6d352b5a601368e1a0f28a6c07562d8e253a094ed1116262ef621eaa2e19fa01d3b0f091cc9366ced813ccc5c6a789e226e0d01bb691f4845fd989ec128bdbb094b31b209b5fb034c63ebbe9cfc2892222a65caa76dc8698cdb853c4d3df39b0bf96a2d16ee46762b144060c192ba42d740349540efdb4acb8f32ea8c2e5163c78acbfb21b8876a9dea999824290262ec9a4e5aa5a89ef76af88b44196ef0474105ad78da677dcc9a466544d514132b6364ddd70b93d8068e5c0a6568efadd92b9b3e13b205a4f36cb991753d2b88386f5589634b1291004c6c2041a6aff64183e08b6c63e48e540f315c9781ca75ed5a9e1a5ba507886a55dbd13f4babbdb4acb708dfe061209e0e5263aff09cbdc86c0e4d20c3202ae535d68f192d7001809fc6ca72374a38b1d1ef8bcb06c179a0029fc7a0497585936cbf56c496b890e18cf714e9a8a8342bdafd03edeaf1f6533fcb9a74cb3d81c763cb13eec8204b2aa0f9bd927f6857faa34ea507d95cc7b11c257c41bc3056c1f2593f459e241c0826a996ef66fd3e1af1fb25eff645d820c1a567853dd6238adfae86bc584a9ecab7f887dd0fbc840fd4e1a61c30dd3b52ec8d66b737daef777e548001c506a21a85ecec5257e600ff23f54acc253d50c71d735d59e422534c6a3590ccb66d0e7fdbebda73a40c47827bf9b01feb187f9d16e7e8c0e3d9debc6a9d21e5e4756989e0b01d1002a13bc24eec9ebc7dbde76d291a74c1bcac8b541842f013c744e437b2a11b90b8c3827bc78f47055e8b7786a01acf77abcff0d754edfcc41a5c65b2898ee8bdaf10ffd11b726c6cdf9e66f540f455a9a4d50faebff441c4061bbf0548fb2f18b37d30c5870b02260fc3f869d51d13989ec19848f9b8d6ea169e040fc92c415c411391ad09336691ac18f4f4f57bb8a590c5aeffb2e7d2353008b3c39cd40d75c81a7093c69741fd9e757d9939a1b6a72176e46c289f5b59d6bcf7666e4a602ac36c3cf84126d152a0275682fe24fb4ad78da43afcb934eaa07a8b2a056c5293a4e69938ddd5c922ba1b8aa48d5de0f27119c6de5452059fa1a6f7a3f3747a4491b3952fa0695168c1fa7d677423d076f35d697d515a09610cc31b895c957b3ea04e5892224af020befe73c0527ed1d1f286c9d881755ec392099a8b2f6276398590e43ed1fda68ca7fdc0e5334bae4f53f2c8b1af256f7274d14e8624bc6b20295eda93974dba5b902ad009136b9df74ae46f587750b52ab7cecd9fb9cf265d093216bdc77accd2917f5524e9bc48a25a62c1a2a52dd5f6174e82ca01c6acc7461c877c80a96fa85823cab35c08244d70705928df2e3604ad7449447e93abf0fb757344f8325d40901e5f36837c4d18cdaa69494ca2ef837cd678bdfee9b037b7610fc9f969ec1a4e30af390067efe6931e898193864fad26721f227e49de7574403c37547f8cce050586ca031a392fdc967d0c27ffc54d47fcf417e7d50da5e8d9faa6a4ec77b3378baf2d2e436fa49f47b31815456d802d4950d6b5f67b375732c45d6a2f5efe26009ed5c0ae256ff74229c3d423cdbd52a4ac659fa5409e02370330aff6791e24ffd251766a47f5c2b8f69a57a030995fa42b25b2e92baec0fc3786b6c4d3081cabbc65e061ff5f53784825d292def7849b4b10fd9df41dfdf266366e11d6cde86fae65f763769d27eb7c39db9cb7d1d797a4b467213d72909444fa6b2b32aa787948b9ba97996ff83463d190eeda4d171546cf2d9948c1f907d90c5e8ba327dcb28b79ea1d780b21131d4f1b566989b231acb750dd5bfc9c1ff087fd8013c9b2eecc1b08984bf6d8a84f3a09b49ed2a59c264c3e63bd6473f7813cb9e49417f90437a45be847fc610b1ba4dea5d954b237b9a4d1f251f06507587e696c1a7adc8b7233ab6c802689e20a2a4009d12bfe9f1c640fdea609f88f9671b8df482a98715a461f8be6bc182bc8da0f454d46cb3fac3cf161e66621b29172d4185f6af42386747f924b6b4a62f70517040f1d8ba1a820f709ce59b26d5a15af90ba70e01e4481ce7931fa556ba26ba4479a49f6c5befbb4a1e7dfc0dbbfbe77ed0690b10a07b49def983aed755f67fc7f7be9bf604b748b8c7ce1e5da24025e478d7c6397d4f84c0ef8c2fa344a3290748f690ba75e478df5d7e2aacc5b4110b9df08349eeda475c5be9547674e9327d32592552919689382e087ee293e13993a9915dc24c3eae8c9217aa8b40cf443a1afa396998e100d6aeace1f2b780ab8b12315d320bb540b0ae81101ec1c981fc1f7f9bccca46d0ca169833aca86c3f6c7bb556c8fedb3cdeaf0823494a7f23bf8082a51622ac49f7ab86df7e4c1872fb21d07ad8342e514bbfdec914436036ff88ae693a0dc4728e22f4fa801fc75bc92f461b165f6a2b3a0f4d21f7d76bcb8e9b28438a9b324bc7006a1457e1bc58d4233f8684db887c2c9a6d7d2705e5d53120adb477f80d6464b2dca256b2f189e25ad94f45b9d8d9a6fe7158ef0d13e5eb8720f4234b094b2fcc07cff9b0707f57bf8a065505b4b48efdc62c78c2b4986778bc87478074a3ec0faa2eb2a58e7250923bedc3df06520b787a8862ddb176c2bb9efdd6b549d025afa584ad34ce6344ee056b6fa8882f6a6421868e3f2b2857bdcb3b68da7bae0aae87109501e2d4887b725398392b6a9ccb463173def60a841754e57a58c3d558fa2c87fded8c96511fff82f137340dde3a3e76e94150eebd512ae82594b69c01979e3833c275619f38a4cef1dfa0bb455caf10642519c3a86627649f78c28d63af65a076e57af43bf73e7b9b001e056a91fa8c66ecab1e342c800f965f7f5eb683105fe4d519b7b4c106ef799eae11954cbe891db1899af3f9762947de5efb041b7bf146f6eb43f689c3b9387414309095a38c34d1858a13d96896e8065489d1f8e5d58f0ae4903a19f86c96271b21656de7768ae5873f9a6a82ea23e833c96f8e4b833ba5c8b7830795ea804ad1f286b02662791436a9d9684b5b99958f2f6bee2cc827eca9501aa5e9a2ce88bd009cecd75d98594df676dd8339698b2eda6f775029ec3e857716b4e74abb0df5e02ec868b08dc52c8541bee8f744cb7aaff69f04e5ca04e86a3f02dd5dba9ba567c42e3de6809d870fca8a112ac324cb61e8b57d3290224c56ad1df3c4d7332483797c39fa2e310a427a5b1ec47793c766d119f8e526f79d88185a6c60e8f41a25155fd9180ddd7c44cd7503e277824debfb1320c0e42a1a05dace9dfb6ec5f237da2e42b43618221a97457400bf85c9576cd5f222b252473228ba2ab287bf87c923b4e9610db9a28c5490036d8abeed3926a9a8f78807c82e98f46d56d267d8d0321472e158b03e864e1a24b0c3f3fa93e1675d91de5ec68054210b36fa7b74ae2e723f2a1e1bafde16d0887b1dc04d072ade15d2b9bc405cb0acd47209dfcd0b8f8f24b4ea479510bd1734de5448cd16a972a166d74eefe40d37f7ee87086d6e6a964e9075c548e76a06945de21437813d513b6ea81830ee842ea56649d30761e54457038f14c0ace9d35a8890fec96903dff7eb30350a1013ccd6dded97054b35ca1b1f8821f9e4127524427e0bd649f954b7008bd322c2085c3f0e0d433c7b7ca64b3fc69e1c8419a321e9191d5f599b9798ef0f09f18f55706dbcc106136325d27b66d76759b98e327d4c2a553f488a7aadc3477ec4cade12e4d366bdec0b4283f46dfd30c5e52dfd72008ecbc94d8b40decc01aa4997c4f55d32804e6aae6fb96ea57041292372c6915cc81f97e544baf219f793475d6e15f75f1b52ab9a7d8c0821ea5449c17b3cb498a9265203e7e57d2dc3610667290bbb47648b5b036e25bda96f8650d744d0605e9d5d9d9748392390eb1d89f5de6a7aad4b7c409cad4edffbb7cfa48788340785a39c28e20000b03c7fb86b76ec4748c14de310ad0f0b2879caf4998574fcbded0fddc5eda6fe17be1991010ba3b74d526587c4044da8f8996d5946c5c5180ce130f36ba5857ae1e9530c44e85f891bf801cf6d869f2aa390a82fc9f47aa85452bb6acb1a0dadabdf29256830046f9120a90f67fcb6c5c36f9f4ca5584dc2e63eb31eda3070a4097a7013214c36a037df79650b13d959296b53e436a26bcaba6eabe92288422621b71aaa2e39eeeb14f6f9bb5f1af19a72392c39535193c6e8c42727100bc5622b5a7f77f5ae33511825d01c816f0b21aaaace16005cc6fb1cf145605e8c2d09211b1fa7862c504d2df8de11f1a339c434fdf33181f65ae96184a43ac4a99f73461ebc4a282faf0e9e9e972f679f843fbfea026a9ff61facd11a59154213127b649eff091cbadb09c7bbbd682711e8a8ded6f3d47305c555e93dd992221942ab6aa9ae25e9996ac5d9769312ff1a24078a84ebb25515956f5840a2c90bf1ad6957e6066c661cfc61fa0a9e74896b9ac134dbd497e49980849025d28e25a44331fbe6944ef6e5beb74aa487ed62ed99129da1a77970f4d17e3a5af096425523cc4f76ebad6f8778dd39268024ddb198872fd5b401193433044b94f66867939335611809846550a9caf8a07dd1295bfede13aa19e8e3de7dc082d4d12331274711efa08aa86d235998a53cf209157a0d35b4705be2b2bd959c164915c4922a4756c85f6c788ff3b509ab89293a7a4e1abd158a8ea4a6b209fefacfd1b00973e0f85ad65a18debd08fb9173f6e313ed095454a052e0bfa07a009eb7dfc47990b62847366329864395730096213661cf9cd5245ab6ff867dcb0750fe92760012bfeb1304c957704ab450fd5f3f9bd91fdc7a30b8a7e21d2df81fb06da3098f9676b1831b10e344414253ac3df3e7d36f1b8c04ca0555181b621fcc3b6893b91016f975dd5e9d4b59cbe3ad2b5143cf4ca3e1acaf7a5f18823479fae4af04646a1f7a8f227587418f96b71a477a787039948cea4eb307ace1671ef4b8290bcd4b79795195a6b862447157f774a659d5c2e621a9f58f9fa788700edcc30ff3800d199a0f614d1136817d51b22d0359a8d0357cf74d1dc9215f574a12464c553c6361e15c8dc77d52ee101313fbf37776ff09939e70b63f27654b3927323a130355a2ac4759b08d14ee54a5897cea4650af6f3dd56700f3f235eab55ec0e4ad0c3f6c3489c688d65870361bea4503aab917a82c702ddb5c2ea7608f360eff04a861ddaa1895fd05d83d4d86e0d4b6a25bf670a707848e6480305cbe1002b7f4cbab238e9a9bdbe17a6326c8eeef23d10a265a50215964bec135ad8d8226cefcb49cadf0bc59f0c9d95944b71a8039a23db9a08b684ff7e7317081d0eb07dafd3240e50e6f01edca163962b0068c03c4243766ebda8cb3bfcdd11626d84ee450f4431ed7bb8cb708ae9facc68c7f15a1156e1342f9e4d10eceaec25ae5ab1cd0927d5135d66192161e1929ffcdf2c1f047b52d5a4cfc7cbfa2ed74d5256950fd37aef909477b56cd2e2bd4e35b09fee1d195fbb71fb0f7166458960dfa3d447eb42fa2e9e74e6adc2fa0e5c9abf8aa8d1bd22ee2020e426fcac00d79a8d6bb6beef750179a56a842c41d008a85b68545f8223dcf85f99f668f496bc1747a6164394b065afa054692e6ea64891ee2f88bb5385f08493868f9dff20cf717da7073f3a20de70fb90be3aafa4925ca4eaee60931b2c6e0720fe807cfd5232709d1bd0417b9db63d3196bebf1a98b6137c7f92b7042158d4d8a2a114982f7531a364f5eae2848d08b2e990a416d31b7237418c9a8583d63ef6c7efb92845fb724b363110c37f3b1f77a30849f171118d03d051c4591c26898d1f82c23a0579e21c9e42a866261074903fcf609e668da95bbc274","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a9204f3c75ae37d096a0c036d64bb1fb"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
