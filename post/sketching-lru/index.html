<!DOCTYPE html>
<html class="staticrypt-html">
    <head>
        <meta charset="utf-8" />
        <title>Protected Page</title>
        <meta name="viewport" content="width=device-width, initial-scale=1" />

        <!-- do not cache this page -->
        <meta http-equiv="cache-control" content="max-age=0" />
        <meta http-equiv="cache-control" content="no-cache" />
        <meta http-equiv="expires" content="0" />
        <meta http-equiv="expires" content="Tue, 01 Jan 1980 1:00:00 GMT" />
        <meta http-equiv="pragma" content="no-cache" />

        <style>
            .staticrypt-hr {
                margin-top: 20px;
                margin-bottom: 20px;
                border: 0;
                border-top: 1px solid #eee;
            }

            .staticrypt-page {
                width: 360px;
                padding: 8% 0 0;
                margin: auto;
                box-sizing: border-box;
            }

            .staticrypt-form {
                position: relative;
                z-index: 1;
                background: #ffffff;
                max-width: 360px;
                margin: 0 auto 100px;
                padding: 45px;
                text-align: center;
                box-shadow: 0 0 20px 0 rgba(0, 0, 0, 0.2), 0 5px 5px 0 rgba(0, 0, 0, 0.24);
            }

            .staticrypt-form input[type="password"],
            input[type="text"] {
                background: inherit;
                border: 0;
                box-sizing: border-box; /* This ensures padding is included in the total width */
                font-size: 14px;
                outline: 0;
                padding: 15px 30px 15px 15px; /* Adjust the padding to ensure there is space for the icon */
                width: 100%;
            }

            .staticrypt-password-container {
                position: relative;
                outline: 0;
                background: #f2f2f2;
                width: 100%;
                border: 0;
                margin: 0 0 15px;
                box-sizing: border-box;
            }

            .staticrypt-toggle-password-visibility {
                cursor: pointer;
                height: 20px;
                opacity: 60%;
                padding: 13px;
                position: absolute;
                right: 0;
                top: 50%;
                transform: translateY(-50%);
                width: 20px;
            }

            .staticrypt-form .staticrypt-decrypt-button {
                text-transform: uppercase;
                outline: 0;
                background: #42464c;
                width: 100%;
                border: 0;
                padding: 15px;
                color: #ffffff;
                font-size: 14px;
                cursor: pointer;
            }

            .staticrypt-form .staticrypt-decrypt-button:hover,
            .staticrypt-form .staticrypt-decrypt-button:active,
            .staticrypt-form .staticrypt-decrypt-button:focus {
                background: #42464c;
                filter: brightness(92%);
            }

            .staticrypt-html {
                height: 100%;
            }

            .staticrypt-body {
                height: 100%;
                margin: 0;
            }

            .staticrypt-content {
                height: 100%;
                margin-bottom: 1em;
                background: #FFFFFF;
                font-family: "Arial", sans-serif;
                -webkit-font-smoothing: antialiased;
                -moz-osx-font-smoothing: grayscale;
            }

            .staticrypt-instructions {
                margin-top: -1em;
                margin-bottom: 1em;
            }

            .staticrypt-title {
                font-size: 1.5em;
            }

            label.staticrypt-remember {
                display: flex;
                align-items: center;
                margin-bottom: 1em;
            }

            .staticrypt-remember input[type="checkbox"] {
                transform: scale(1.5);
                margin-right: 1em;
            }

            .hidden {
                display: none !important;
            }

            .staticrypt-spinner-container {
                height: 100%;
                display: flex;
                align-items: center;
                justify-content: center;
            }

            .staticrypt-spinner {
                display: inline-block;
                width: 2rem;
                height: 2rem;
                vertical-align: text-bottom;
                border: 0.25em solid gray;
                border-right-color: transparent;
                border-radius: 50%;
                -webkit-animation: spinner-border 0.75s linear infinite;
                animation: spinner-border 0.75s linear infinite;
                animation-duration: 0.75s;
                animation-timing-function: linear;
                animation-delay: 0s;
                animation-iteration-count: infinite;
                animation-direction: normal;
                animation-fill-mode: none;
                animation-play-state: running;
                animation-name: spinner-border;
            }

            @keyframes spinner-border {
                100% {
                    transform: rotate(360deg);
                }
            }
        </style>
    </head>

    <body class="staticrypt-body">
        <div id="staticrypt_loading" class="staticrypt-spinner-container">
            <div class="staticrypt-spinner"></div>
        </div>

        <div id="staticrypt_content" class="staticrypt-content hidden">
            <div class="staticrypt-page">
                <div class="staticrypt-form">
                    <div class="staticrypt-instructions">
                        <p class="staticrypt-title">Protected Page</p>
                        <p></p>
                    </div>

                    <hr class="staticrypt-hr" />

                    <form id="staticrypt-form" action="#" method="post">
                        <div class="staticrypt-password-container">
                            <input
                                id="staticrypt-password"
                                type="password"
                                name="password"
                                placeholder="Password"
                                autofocus
                            />

                            <img
                                class="staticrypt-toggle-password-visibility"
                                alt="Show password"
                                title="Show password"
                                src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg=="
                            />
                        </div>

                        <label id="staticrypt-remember-label" class="staticrypt-remember hidden">
                            <input id="staticrypt-remember" type="checkbox" name="remember" />
                            Remember me
                        </label>

                        <input type="submit" class="staticrypt-decrypt-button" value="DECRYPT" />
                    </form>
                </div>
            </div>
        </div>

        <script>
            // these variables will be filled when generating the file - the template format is 'variable_name'
            const staticryptInitiator = ((function(){
  const exports = {};
  const cryptoEngine = ((function(){
  const exports = {};
  const { subtle } = crypto;

const IV_BITS = 16 * 8;
const HEX_BITS = 4;
const ENCRYPTION_ALGO = "AES-CBC";

/**
 * Translates between utf8 encoded hexadecimal strings
 * and Uint8Array bytes.
 */
const HexEncoder = {
    /**
     * hex string -> bytes
     * @param {string} hexString
     * @returns {Uint8Array}
     */
    parse: function (hexString) {
        if (hexString.length % 2 !== 0) throw "Invalid hexString";
        const arrayBuffer = new Uint8Array(hexString.length / 2);

        for (let i = 0; i < hexString.length; i += 2) {
            const byteValue = parseInt(hexString.substring(i, i + 2), 16);
            if (isNaN(byteValue)) {
                throw "Invalid hexString";
            }
            arrayBuffer[i / 2] = byteValue;
        }
        return arrayBuffer;
    },

    /**
     * bytes -> hex string
     * @param {Uint8Array} bytes
     * @returns {string}
     */
    stringify: function (bytes) {
        const hexBytes = [];

        for (let i = 0; i < bytes.length; ++i) {
            let byteString = bytes[i].toString(16);
            if (byteString.length < 2) {
                byteString = "0" + byteString;
            }
            hexBytes.push(byteString);
        }
        return hexBytes.join("");
    },
};

/**
 * Translates between utf8 strings and Uint8Array bytes.
 */
const UTF8Encoder = {
    parse: function (str) {
        return new TextEncoder().encode(str);
    },

    stringify: function (bytes) {
        return new TextDecoder().decode(bytes);
    },
};

/**
 * Salt and encrypt a msg with a password.
 */
async function encrypt(msg, hashedPassword) {
    // Must be 16 bytes, unpredictable, and preferably cryptographically random. However, it need not be secret.
    // https://developer.mozilla.org/en-US/docs/Web/API/SubtleCrypto/encrypt#parameters
    const iv = crypto.getRandomValues(new Uint8Array(IV_BITS / 8));

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["encrypt"]);

    const encrypted = await subtle.encrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        UTF8Encoder.parse(msg)
    );

    // iv will be 32 hex characters, we prepend it to the ciphertext for use in decryption
    return HexEncoder.stringify(iv) + HexEncoder.stringify(new Uint8Array(encrypted));
}
exports.encrypt = encrypt;

/**
 * Decrypt a salted msg using a password.
 *
 * @param {string} encryptedMsg
 * @param {string} hashedPassword
 * @returns {Promise<string>}
 */
async function decrypt(encryptedMsg, hashedPassword) {
    const ivLength = IV_BITS / HEX_BITS;
    const iv = HexEncoder.parse(encryptedMsg.substring(0, ivLength));
    const encrypted = encryptedMsg.substring(ivLength);

    const key = await subtle.importKey("raw", HexEncoder.parse(hashedPassword), ENCRYPTION_ALGO, false, ["decrypt"]);

    const outBuffer = await subtle.decrypt(
        {
            name: ENCRYPTION_ALGO,
            iv: iv,
        },
        key,
        HexEncoder.parse(encrypted)
    );

    return UTF8Encoder.stringify(new Uint8Array(outBuffer));
}
exports.decrypt = decrypt;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
async function hashPassword(password, salt) {
    // we hash the password in multiple steps, each adding more iterations. This is because we used to allow less
    // iterations, so for backward compatibility reasons, we need to support going from that to more iterations.
    let hashedPassword = await hashLegacyRound(password, salt);

    hashedPassword = await hashSecondRound(hashedPassword, salt);

    return hashThirdRound(hashedPassword, salt);
}
exports.hashPassword = hashPassword;

/**
 * This hashes the password with 1k iterations. This is a low number, we need this function to support backwards
 * compatibility.
 *
 * @param {string} password
 * @param {string} salt
 * @returns {Promise<string>}
 */
function hashLegacyRound(password, salt) {
    return pbkdf2(password, salt, 1000, "SHA-1");
}
exports.hashLegacyRound = hashLegacyRound;

/**
 * Add a second round of iterations. This is because we used to use 1k, so for backwards compatibility with
 * remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashSecondRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 14000, "SHA-256");
}
exports.hashSecondRound = hashSecondRound;

/**
 * Add a third round of iterations to bring total number to 600k. This is because we used to use 1k, then 15k, so for
 * backwards compatibility with remember-me/autodecrypt links, we need to support going from that to more iterations.
 *
 * @param hashedPassword
 * @param salt
 * @returns {Promise<string>}
 */
function hashThirdRound(hashedPassword, salt) {
    return pbkdf2(hashedPassword, salt, 585000, "SHA-256");
}
exports.hashThirdRound = hashThirdRound;

/**
 * Salt and hash the password so it can be stored in localStorage without opening a password reuse vulnerability.
 *
 * @param {string} password
 * @param {string} salt
 * @param {int} iterations
 * @param {string} hashAlgorithm
 * @returns {Promise<string>}
 */
async function pbkdf2(password, salt, iterations, hashAlgorithm) {
    const key = await subtle.importKey("raw", UTF8Encoder.parse(password), "PBKDF2", false, ["deriveBits"]);

    const keyBytes = await subtle.deriveBits(
        {
            name: "PBKDF2",
            hash: hashAlgorithm,
            iterations,
            salt: UTF8Encoder.parse(salt),
        },
        key,
        256
    );

    return HexEncoder.stringify(new Uint8Array(keyBytes));
}

function generateRandomSalt() {
    const bytes = crypto.getRandomValues(new Uint8Array(128 / 8));

    return HexEncoder.stringify(new Uint8Array(bytes));
}
exports.generateRandomSalt = generateRandomSalt;

async function signMessage(hashedPassword, message) {
    const key = await subtle.importKey(
        "raw",
        HexEncoder.parse(hashedPassword),
        {
            name: "HMAC",
            hash: "SHA-256",
        },
        false,
        ["sign"]
    );
    const signature = await subtle.sign("HMAC", key, UTF8Encoder.parse(message));

    return HexEncoder.stringify(new Uint8Array(signature));
}
exports.signMessage = signMessage;

function getRandomAlphanum() {
    const possibleCharacters = "abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";

    let byteArray;
    let parsedInt;

    // Keep generating new random bytes until we get a value that falls
    // within a range that can be evenly divided by possibleCharacters.length
    do {
        byteArray = crypto.getRandomValues(new Uint8Array(1));
        // extract the lowest byte to get an int from 0 to 255 (probably unnecessary, since we're only generating 1 byte)
        parsedInt = byteArray[0] & 0xff;
    } while (parsedInt >= 256 - (256 % possibleCharacters.length));

    // Take the modulo of the parsed integer to get a random number between 0 and totalLength - 1
    const randomIndex = parsedInt % possibleCharacters.length;

    return possibleCharacters[randomIndex];
}

/**
 * Generate a random string of a given length.
 *
 * @param {int} length
 * @returns {string}
 */
function generateRandomString(length) {
    let randomString = "";

    for (let i = 0; i < length; i++) {
        randomString += getRandomAlphanum();
    }

    return randomString;
}
exports.generateRandomString = generateRandomString;

  return exports;
})());
const codec = ((function(){
  const exports = {};
  /**
 * Initialize the codec with the provided cryptoEngine - this return functions to encode and decode messages.
 *
 * @param cryptoEngine - the engine to use for encryption / decryption
 */
function init(cryptoEngine) {
    const exports = {};

    /**
     * Top-level function for encoding a message.
     * Includes password hashing, encryption, and signing.
     *
     * @param {string} msg
     * @param {string} password
     * @param {string} salt
     *
     * @returns {string} The encoded text
     */
    async function encode(msg, password, salt) {
        const hashedPassword = await cryptoEngine.hashPassword(password, salt);

        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encode = encode;

    /**
     * Encode using a password that has already been hashed. This is useful to encode multiple messages in a row, that way
     * we don't need to hash the password multiple times.
     *
     * @param {string} msg
     * @param {string} hashedPassword
     *
     * @returns {string} The encoded text
     */
    async function encodeWithHashedPassword(msg, hashedPassword) {
        const encrypted = await cryptoEngine.encrypt(msg, hashedPassword);

        // we use the hashed password in the HMAC because this is effectively what will be used a password (so we can store
        // it in localStorage safely, we don't use the clear text password)
        const hmac = await cryptoEngine.signMessage(hashedPassword, encrypted);

        return hmac + encrypted;
    }
    exports.encodeWithHashedPassword = encodeWithHashedPassword;

    /**
     * Top-level function for decoding a message.
     * Includes signature check and decryption.
     *
     * @param {string} signedMsg
     * @param {string} hashedPassword
     * @param {string} salt
     * @param {int} backwardCompatibleAttempt
     * @param {string} originalPassword
     *
     * @returns {Object} {success: true, decoded: string} | {success: false, message: string}
     */
    async function decode(signedMsg, hashedPassword, salt, backwardCompatibleAttempt = 0, originalPassword = "") {
        const encryptedHMAC = signedMsg.substring(0, 64);
        const encryptedMsg = signedMsg.substring(64);
        const decryptedHMAC = await cryptoEngine.signMessage(hashedPassword, encryptedMsg);

        if (decryptedHMAC !== encryptedHMAC) {
            // we have been raising the number of iterations in the hashing algorithm multiple times, so to support the old
            // remember-me/autodecrypt links we need to try bringing the old hashes up to speed.
            originalPassword = originalPassword || hashedPassword;
            if (backwardCompatibleAttempt === 0) {
                const updatedHashedPassword = await cryptoEngine.hashThirdRound(originalPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }
            if (backwardCompatibleAttempt === 1) {
                let updatedHashedPassword = await cryptoEngine.hashSecondRound(originalPassword, salt);
                updatedHashedPassword = await cryptoEngine.hashThirdRound(updatedHashedPassword, salt);

                return decode(signedMsg, updatedHashedPassword, salt, backwardCompatibleAttempt + 1, originalPassword);
            }

            return { success: false, message: "Signature mismatch" };
        }

        return {
            success: true,
            decoded: await cryptoEngine.decrypt(encryptedMsg, hashedPassword),
        };
    }
    exports.decode = decode;

    return exports;
}
exports.init = init;

  return exports;
})());
const decode = codec.init(cryptoEngine).decode;

/**
 * Initialize the staticrypt module, that exposes functions callbable by the password_template.
 *
 * @param {{
 *  staticryptEncryptedMsgUniqueVariableName: string,
 *  isRememberEnabled: boolean,
 *  rememberDurationInDays: number,
 *  staticryptSaltUniqueVariableName: string,
 * }} staticryptConfig - object of data that is stored on the password_template at encryption time.
 *
 * @param {{
 *  rememberExpirationKey: string,
 *  rememberPassphraseKey: string,
 *  replaceHtmlCallback: function,
 *  clearLocalStorageCallback: function,
 * }} templateConfig - object of data that can be configured by a custom password_template.
 */
function init(staticryptConfig, templateConfig) {
    const exports = {};

    /**
     * Decrypt our encrypted page, replace the whole HTML.
     *
     * @param {string} hashedPassword
     * @returns {Promise<boolean>}
     */
    async function decryptAndReplaceHtml(hashedPassword) {
        const { staticryptEncryptedMsgUniqueVariableName, staticryptSaltUniqueVariableName } = staticryptConfig;
        const { replaceHtmlCallback } = templateConfig;

        const result = await decode(
            staticryptEncryptedMsgUniqueVariableName,
            hashedPassword,
            staticryptSaltUniqueVariableName
        );
        if (!result.success) {
            return false;
        }
        const plainHTML = result.decoded;

        // if the user configured a callback call it, otherwise just replace the whole HTML
        if (typeof replaceHtmlCallback === "function") {
            replaceHtmlCallback(plainHTML);
        } else {
            document.write(plainHTML);
            document.close();
        }

        return true;
    }

    /**
     * Attempt to decrypt the page and replace the whole HTML.
     *
     * @param {string} password
     * @param {boolean} isRememberChecked
     *
     * @returns {Promise<{isSuccessful: boolean, hashedPassword?: string}>} - we return an object, so that if we want to
     *   expose more information in the future we can do it without breaking the password_template
     */
    async function handleDecryptionOfPage(password, isRememberChecked) {
        const { staticryptSaltUniqueVariableName } = staticryptConfig;

        // decrypt and replace the whole page
        const hashedPassword = await cryptoEngine.hashPassword(password, staticryptSaltUniqueVariableName);
        return handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked);
    }
    exports.handleDecryptionOfPage = handleDecryptionOfPage;

    async function handleDecryptionOfPageFromHash(hashedPassword, isRememberChecked) {
        const { isRememberEnabled, rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

        if (!isDecryptionSuccessful) {
            return {
                isSuccessful: false,
                hashedPassword,
            };
        }

        // remember the hashedPassword and set its expiration if necessary
        if (isRememberEnabled && isRememberChecked) {
            window.localStorage.setItem(rememberPassphraseKey, hashedPassword);

            // set the expiration if the duration isn't 0 (meaning no expiration)
            if (rememberDurationInDays > 0) {
                window.localStorage.setItem(
                    rememberExpirationKey,
                    (new Date().getTime() + rememberDurationInDays * 24 * 60 * 60 * 1000).toString()
                );
            }
        }

        return {
            isSuccessful: true,
            hashedPassword,
        };
    }
    exports.handleDecryptionOfPageFromHash = handleDecryptionOfPageFromHash;

    /**
     * Clear localstorage from staticrypt related values
     */
    function clearLocalStorage() {
        const { clearLocalStorageCallback, rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        if (typeof clearLocalStorageCallback === "function") {
            clearLocalStorageCallback();
        } else {
            localStorage.removeItem(rememberPassphraseKey);
            localStorage.removeItem(rememberExpirationKey);
        }
    }

    async function handleDecryptOnLoad() {
        let isSuccessful = await decryptOnLoadFromUrl();

        if (!isSuccessful) {
            isSuccessful = await decryptOnLoadFromRememberMe();
        }

        return { isSuccessful };
    }
    exports.handleDecryptOnLoad = handleDecryptOnLoad;

    /**
     * Clear storage if we are logging out
     *
     * @returns {boolean} - whether we logged out
     */
    function logoutIfNeeded() {
        const logoutKey = "staticrypt_logout";

        // handle logout through query param
        const queryParams = new URLSearchParams(window.location.search);
        if (queryParams.has(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        // handle logout through URL fragment
        const hash = window.location.hash.substring(1);
        if (hash.includes(logoutKey)) {
            clearLocalStorage();
            return true;
        }

        return false;
    }

    /**
     * To be called on load: check if we want to try to decrypt and replace the HTML with the decrypted content, and
     * try to do it if needed.
     *
     * @returns {Promise<boolean>} true if we derypted and replaced the whole page, false otherwise
     */
    async function decryptOnLoadFromRememberMe() {
        const { rememberDurationInDays } = staticryptConfig;
        const { rememberExpirationKey, rememberPassphraseKey } = templateConfig;

        // if we are login out, terminate
        if (logoutIfNeeded()) {
            return false;
        }

        // if there is expiration configured, check if we're not beyond the expiration
        if (rememberDurationInDays && rememberDurationInDays > 0) {
            const expiration = localStorage.getItem(rememberExpirationKey),
                isExpired = expiration && new Date().getTime() > parseInt(expiration);

            if (isExpired) {
                clearLocalStorage();
                return false;
            }
        }

        const hashedPassword = localStorage.getItem(rememberPassphraseKey);

        if (hashedPassword) {
            // try to decrypt
            const isDecryptionSuccessful = await decryptAndReplaceHtml(hashedPassword);

            // if the decryption is unsuccessful the password might be wrong - silently clear the saved data and let
            // the user fill the password form again
            if (!isDecryptionSuccessful) {
                clearLocalStorage();
                return false;
            }

            return true;
        }

        return false;
    }

    async function decryptOnLoadFromUrl() {
        const passwordKey = "staticrypt_pwd";
        const rememberMeKey = "remember_me";

        // try to get the password from the query param (for backward compatibility - we now want to avoid this method,
        // since it sends the hashed password to the server which isn't needed)
        const queryParams = new URLSearchParams(window.location.search);
        const hashedPasswordQuery = queryParams.get(passwordKey);
        const rememberMeQuery = queryParams.get(rememberMeKey);

        const urlFragment = window.location.hash.substring(1);
        // get the password from the url fragment
        const hashedPasswordRegexMatch = urlFragment.match(new RegExp(passwordKey + "=([^&]*)"));
        const hashedPasswordFragment = hashedPasswordRegexMatch ? hashedPasswordRegexMatch[1] : null;
        const rememberMeFragment = urlFragment.includes(rememberMeKey);

        const hashedPassword = hashedPasswordFragment || hashedPasswordQuery;
        const rememberMe = rememberMeFragment || rememberMeQuery;

        if (hashedPassword) {
            return handleDecryptionOfPageFromHash(hashedPassword, rememberMe);
        }

        return false;
    }

    return exports;
}
exports.init = init;

  return exports;
})());
            const templateError = "Bad password!",
                templateToggleAltShow = "Show password",
                templateToggleAltHide = "Hide password",
                isRememberEnabled = true,
                staticryptConfig = {"staticryptEncryptedMsgUniqueVariableName":"0cc6e6af0b2d7f1414b71db3ee4c3edfb44dbde45e4afcd3706f17f7ef99695a02a106b7331cf8c1fe81856824c5d6d5c2b83e2bfb2d0c48471988ec13d0623cee2b23dace14f424ad37a201d9bf9c8e18757f360481520637c25d62222c0b3c029e81d24a97df92e17ab92a653126df93d186cd519f9a29319b4a4b183c335701d8a6ea1c9241fb71addbe91e88be230c7d8bb3de9f9ecb58536e903201759fda0984072cb83e0454147e862d65cb6462d84108f2243ef0be6fb894110c60a7d782e85477cd11e883d5958c194dea8b172ebe182dd51dab26b63092c389fe78e5526aefb291c816f1da09ca1981ad6eac655677c094485b6765f9273ef2436a7871b5c7edad0fe11e3cec070288f6bc2db12264d4c55e0e02afe9f5280c7454b75193f8557902354f9b0a3a81f422baf8dfee8940448d9eea23dc3f410afc304931b74413b9cc5adb2561842eb2bbb76ea06af07135cc47e2d0b18b9f8f52fe6befd70d259361107af1d87a8784a3e7c45915a3bd86431afe4c2b13ce4e9f5287d4abc88529d982a3c77e7f1f6662e3ab128ad303831ed31b6dc7295533b98201fd06e503ed95fb73a89e0cd6066c4e199034f352dbf3c41ed36989abcbce6390c84d4e6c5415f7168c993cc0585368bbfc2fac8f89c049b901c97b2d09fc7dc901fbcbe5bb8fc6a4ef829475ffdc1dcfaacccaf19dc0ffa2dfbd1326d2f3c3322957d2d6dad12efe6e21c283e933c4dc8c8e6b7d95781844413231703dc1ab419991cfb29efe55b0ffe6ec1aecb6a4001cec03e1cb7a549ae448facc0abacd121d404fd6be959eca496d58bb1c8dc2cf912827632c55260e0734cf13349e89481a3c60485ad8b6616bda1ba6f01194a7d5babbb9871a8df7decba4d19be13625dca5c3871b4c30d538814a3e5d7883b878ee55b9d4c1c255acafeada0a80ff045fec8e04e87cb3a10f0627e8c69cc695b2f28324fcf8817ae6980d5e17e4ff79ff703fd727c6f1f8bbaf159701d97817bb1818c69650fd0c0234ea60dc84e03f9be7b8807d566eb09351c54ee3afc2a7ae542e1a91a02eeed99d83ca9d5f03bb5f54a5a75a7f4d5b90d5e3e8a1f9e36cede014b640c3b1188b2fd918e360d51cef4f56583bd37489bff473c73f389c033dfad6d86139f47b1954953e7c001c4c19aa64b69348fb33b710fd76bae32b1a649a35d9cb353c703985048b4d2051bea1dd95591fc88b624d54db3033813fd7317e9076eec996064a54658724145fdd52d09ded601d30a77bb90aef5ec795fc498410cc4474ff42c97f1e67828a06120dc91ce771b7f8747704a1f403de45a5dfdfa55ae89f23f0d3234c05c08c1cb918456684f68cc2beebf414f218c99942390671afaab0878a091b0114bafdeb833fa0ee165c3eefb31754d838105e2aa5346d6dea3dc75cd0a1fa6477c00581eb0d26bad12becdd832421ef683448130e6848b464f48c77b5f0ffaf377105076d4b482d42dbd36d18d98c30609d4a014dfecb706ca583b323e728966c1c725632a35bc44de2b4a4718357eef49e923ab766d4d21bfaa565210ec2b44977bb88a6b3e056891931c34f6aabf5a346b0d39cd7814d350d9fe0c704f874fb83297f05957a887a9fc08c2691ae0488f049374d6c0327f7705192e93ec5795a3231ae75990992c9dc54b412ff334fb7db8f73711daf59be1e40bcc7661351e566a0536bc72e23707b678790091b7887cf61aeb5a914c3bc40f26400747895c380b55056d5fa41b030914204c451e0e44ca3442a0ea35286fe5c8688f6f75ae1087b3273130c4ad0ecabeb0e14b087e052becb23a7304a85fca8e8a26771f5e990dc44069a12a6e395fc35753a2f93990d063b428cc0c8b20e3847138184173f0048014eb932ce69c095ecbc0ee9f2b410a6fb5c8b2ff369883e54843dd24b13055f106b7bf50fdccbe55b0b30cda42ae3a54e5f37cb4ec3e2eb7e1becede61dd57324632c241d66b22dbd567e82828bd89a32d09db742cabbf2e837725b9b1ebc6d08930ad8fa50dbef8e9be02cd5f79b3620db2d1ac752016579f807fcdb3b906c3988f7b50726e1e22c04ac8297d916570dc00acb4b5c0b1bc9e75cdec9e0efadc6ad52d297b71d6caf2fd4153f1ea9cf483327be72c7f48d160cb3e480b0a45c403ac54f79d166ffb29fb8dc403706538ef4f241ab7401f0fc5367dc9f313197af6ffd7020c58e1151e2f58d5010b8d5f4f1333a8440b86456ba1684e4e30f6ee38bf2e9fdebf21a5d15c6cfb2db6213ed2a8fc56832fa159a0e4391f7684e3866d2f74d4be09690463491c4bf8dcf19bf9a6d1c002dfd3b171a9419e460755c3b99d0a0c9454e0f6dba1d8cb5ecfd63a12afaa1cdd4ba4354f2030b4d96d5ca299eda62e2abfcad0ecbb363e35db89e762f894429800d28e1697ef02a78b854bc007ad71c855bf779718251be6157cc076d76d36e4ad2f4811d9396fc45402e994b78167082962e1852a10b2241c521e6eeb5d5802da103ae823afb6ec68b85aefb42608a58e2c4f2f5ef294abf2686564586f4856ba35344f42404470b5791fabbc0c63f89abb888d7bbb0b97eb67f6ea21017dc19ac58615399121f1368e609f79a5030d83b0c486aeda6805605ff1b5fae28b070401496b26e36f7175f29cd44e889fecce1fc1dfa336e34893f7ce5aeb67e94b4b44f7a952be87fd287b7ee2941eba24a59f5e0243add3ee70b3e428e5e08d1c40fa48ef2da7491b76a21ca90ec8a5ad06fe1a0b1860b62f6c43a1c30f1ba5909f98257360b0795479c32a646a3423ec4088c85a43a380527c903b2a4472c530460c45b1de54166d10b8a5d3c10b29110faa93b436f80ae57b109e9711be3cd55464af2e6079742234ce56c2e8e88fad96dc559663cdce021fda20d17c2174b92d3eeda5ebaf2e66434dd06b1ae476249b1d69dfe4c63e1c44f0c9c66dbf07f4e55657d7fd71654b48ed25c332c45ab7b69d6987e1041b4f4cf920aa75559dc75cc7c6b91d61d201fe9d775424eb4578a9fec60ea64025ee6d20e6f044d2cfeca9e62623f080d6c426ceb6a7bd7e713f46f14accfcb931f721a9f2770659d7e971995d7c943747ba88d63d9f8949aef2f8efaf93e09b4f280e9052ea81ab1756615b7b0017c298b440ede6b628baba1abb3d258ec5ff4d718aeff8d781289728b5e4f2a032c13b45ba55fe4193e349a0e38d0e7d6cd1f8cfa436cca777ee58a5aa59e789f53d9a06bacb797c6ed21fdc51969c4003ef6fff945ab0f240a744e6247d6aeef3b5756dbe0bd826fb87e1d7cc71a908b7bea19b5f9aaad32f19748010659a402fcc7a9ab300c39e70727cb31748a137aea7da5b7720296db6b95a72e5633f75ca34e92985dc4e5b5c7ae1dfac10ee33595967ac25841ab688d31d5bb9b444ab6b34123e33572b410a210537cdef3120010c334dc68baed6a79a26f7633df3cfcafb3128e44c1f9d98e154896b8c901cc1d29ec3d75e37d34a09e8e239fdcca066fe67b0fc08e87864a00255e8fa18a6fca280865fc01e4cb1af6fcd91e35e3aa53b4269df6c9858d12bd9a5f56afb40fb6d4e97833b2118fcd38f59f2fab4a7584b0cb05d6150509d3e3b6dfd2db626ea92e875328d36fd5af100226c1819970600ca831484d1fc43be5eced94c892be029f034cbb0783691bf55ed11d7f516f0c5f45bbe7851bd4778b4dfcd75f2f34187bfb3825dc50e3c8030b311bfc3fa13f32c2d82f88d707db2a8b08b233e9b8490526649c45820ed1388885d88fb155e504d43d2190f466061c3c38c5d8f8ce5d187637c16c8b7e90a1efca59252e506913edb1f4a731d4cc1be3fbd58facc44d6f0ae06b616f0bafc83557b7a6bcacbfa9fb56b9f8d2b7cc90f32f02c364aa302de5a9d2b8a92ef83dc1890ef4e0659c7c9864247e706e493180ecd7538cdaac165806813aac8ad399194a80c132da00136cf130e4cd7b596d63e2b2f6dd64bc27cdb0aa7e0570a49e81a14b892573b40ce0dd44ab844c89afb5e0583c08d40159a9f6ff3f16cf9b6a64aaea2dd79c124379dbe62f2fa0cd63c4e7999beaa754cec546f37bec7c18aab5d2832b57cd5c5b7abb4b5a1c83104fc6fc30fe4f591a970cd4bc155154b3e13a5e34e9ce5d0a464d95df4a40427549a750084e4148b59e06a648f46dbe102b55d73679a6a09f87e6ccb7c78db07b826a6dea775841aa4d2f6df3b1fcd1896c3a9744e83adca0a9c3b431e83dfb0948b08e2c48a7ef6a97070969ca3f8cdeaae11ba064ec3276b00f631cbd3525ef828e6e0ce41b3aec71b1fd3d265ecb1efe587e2430429057c1d6db64c34d2b1a5aa32ffb631e3803d25f43b3bf64861b29e9186b321105a1c01a5b842bd8a5ae35089f46af7f2210399644162321ba6f4ddf80fad58059194c4f3c01d46fa3b1370f1bd47ab4194ae7b19ffcb9a2a25e59cb844a5aba32780bd2abceed8674c00c692b05d0878a591b766090914f30883b740d7c9cbe71aae7bd897a5f636c9ef3c2b740b7753cc9f296582d4a74239c2cac56d41b61fb88feabe12051e0ef6930e25e93c300f06d81089ec8deb0b5396829346645f3157d621f3e429e85739035aa83dda57022e26e499a9311e34a4f26fce26d375738b6e9ebdd466370ba27c3a36db3aeb422d8826738d8975565c9677db1d9d4dcf26ad34b4207359a656c6e57bbc69043b68fafbc37b1bc5a55c26abd94a2b0afa3acc7cbedf65a9378f9ab93ba6a25c61fdbb1ccbff652b13bb2bce5b7ee04bd98909e0c69633161e53ef539038002e045bedf71ee98470278180e707934335146bd2b6f6f95d1488e651c52f93790b469e08031c924431f55009906eae2004c311563624ee964c96b88ffce60c48bcfc2310351a0d31a147ea6f627854ae9a572a4abe7758790ced6966c3754a853ba9090b40ced570a266b455d9d537a9c13ac0afe647fda32330928f7a63b6d4ca8217e37d40dc4a2954064bbf4a93a17d2b09c3d45318ff19c73b8b3d24f839f09cf267aa5cab8e1d0b9c9328f7183cc567d550b718b92cf03c9523deb23947dc651277a9fd393c3087e6e169331402e0e2d3c3f3c7e591ba03cd4831461d6c498d182d37a41178184b2b1145a34fcbca1ba06918525befa7522ebc3ff673152de1516d902b9b8ed5acfdc63a2430eba844a3878a7a197e791396e7169bbbc52064aa7bce7658db20317427408f4918ae4782314d6c54c01cc6d570a2f1ac19b555eb22f6e3d2602860b63c90486dc0a200e7c3dfa49c9bb1f898845c5f109e2425c8da67f3440ed765e91c82c0f9c59175b464428f39f865de9b7529d91a124216ca0d848c4efdad49c48fbda8967bb30ac4d5a2b4a90df1535ffb28ff8126a494bf2b4a0a642b9806187bd4b40d211d7b46b9fe13748e435b39071cabb76a86dbe1306032e7917146d7f957b5af51e04697465d2a62fe605f364b4ae13783acc76b6dc0ded7a094c016c1f12ba399738e6533434f7cecafb8640f0b7f31340b9b4fbe8e1265f6d4f6ff98a4ab5479bc42c3e6dc2b7666e621ea9e23545639e43609e863cc74a92707c772958825d6f5648613c1d62e0b8dbe21fde0531b2fb58081fb95022ca8483afa90a3bced91d5b5bc7529068a663a5998ab2b94309f7b823d339d64e7deda15988bf2dc0b290e70ce6b28c9360ace08925bc0bfbf1da32bc2a3de9efa361ac1e274a71a57216d37212c369873e8b3261aa2c905e4562a0a486db7e7c28a56f23e46161dce846cbffa2d91e50c3dcc4c33a1c3e0235a02dbe1f52d2174be98b20c298c771d979dd0fd54eed3b551616260ab5fb6ecf4fec4d4e65fdb881ccca92d1110d2175ef952224423a94d2ec1fdcad7a2bf78d6f344fb951c5afa5b438f38cdf9c91828e24c54db70a1b8f0712eab27e1eb967e749887356fcd1c3b71ef1cb079f1dee200d828343b829a21aa431af6dc5a2b33c5a7f76312ee945667b10692fb1de5460840c00e002e2f0a12d47bda40b170db312de7b09d175f59039b774c2096002088cf976add7c828b22f42d55f31de2dea4b65e3832c4097b47fde86627c4ddab4a63103021c3711d5a67b2e4352f4510566b8aa068c8f4e08d87472886ac63f08ce1bc4bbf4a336df7df64c76711c36bee22dd52beb22d2d00f52ea25acc1038b23363518ad1c7422d0c6ea4d78ad275d696018ff5be8ef8d3199a86225b991f9779c888976474b958929048b6c4b8a87e4ffee39aff798774eff815ab42aa1f095322caf8be5c1802785c7649498d9c89d95e4c412aa0c38405c5d05c535e030aa90fe6e0670d960c4c91a276f21c5e3f13dd6fc475ac9b7a540092342ec83d72997b2c720d594895f0397868b4a2db29632ad017028d0d2de3a8b93d60c0c98ad782ca04fc6e29db6011f3c179689b006d952f4746e9017abd728518650a81afa4d908f61e49655b2db65f9d1e0544820957eade3beefc6220ba4e281e6179b8ee7fdfeb8f3b4c098d5d01e453b4286be92950b3c4cf5fae38fd74bc6d5669a974a01b77272bb1e4c76463da4071937aa3c222fd5ed11c4142a72fef1a2e99a6b406c0aed34cdf32d9049ac807a753e78328a66d3e1a195233361f2de700e9b9bff46c3766a740746c0e22578e515d3d7f72b286c4f0a0decfbe968dfe3b8e8265075b3e6df68504f0961f50c4cc67064858aa2985ccc2c044eecfdf40739a78b85f75f609d8dad0be83b893434abd880afc7cc4dd29989e6f6d53733be4dfac0bfa0c6485a433cd6de911374a24cbe0e79f397fb24c27fef883e3b375b551a0368b62eece727ce8941ad9d52a5d1a17b62dca6e97d17e1fba3be955a160b9fb604d879d745f7f03c0988edb88658c4f59999a09c7f87cef71f010546d41aab0497e0e66db96eadc79c1406b9febb59bdb3842d3f935a2d1c0caf6b1ae46f316fb28f2a18282ffedbd2ee8755a2fd815718dca76fc407da1116324f53809bfcc6e963ef4d226334de1ace6c542732a051e61a92a8560c5caf17da67967b0ce52cea3052f00170a8b1ba1d9985ac294cde4abcbeddaa706e4683859c869ea19dd8c7d81bb216b033998e21c88c9a8ca6a0dc9deaba502437155e920de6b4b3b283917e71641f5843d20def5f9adb59cafe2fbf7d4b63cbe5e7f9d79e666bf7dc752ed59e8d39c7f498881fe7b82f2304b3e5b7b503521b5693a4f8af09e4446fafd842964fc12295b4b1cd86b715a9df23d9c0e6fe41baeb6878899e57e59c035299c755a11505bc1604a8524dfa353522ad1605688c09c319c6243b4e0c8b0f2fd491b98d77970913ce74a3b1c1aa677b05b61812462a005dc9fbd0885d66a1a2bd7eec1e5c7df6bc6adfeea169543735613dcb1f8b7cc5b3b08cac42872d44d79242b68b1bb2abd2f9fa671a75a52b6ebc356e1d5e20f8f763adfa14219cacb301ee231d39900fcec1af126e25804caaea13220e85ce63966b3554d2be6619aa8b93f24dfca58940625f856854cbba087c80ef69e2a48ceff6891950ebec486cfc28cfecda25b2eb5fb117850c28f3c4025c1472d72c34a5db9bfe5642999bd769718f9f4ce9071628090f335a7adea4e5529ec0527edc03d920136d01e2ce7e9e90783cc96dd3ca0c95dabc6340c5336bc120c331551355b6d5954cf584b2b09dd4b2f34551ecdfa10d89eb021763d84a5c52901cdad0eb2a105b2b5b8eed95c28e60af9e8ea911da9250368b40b407063cadf92ff2a87b99d1380d95cb86d40f98bf664e5b0ed9e024047e525cce40831785d1e3a99091e460c813fbb10ed62eb8ca0d285558246792b981957d78babe12a1e5b7c0be86654e91670a26db8f69f9f71b1be9f0a0972d0857386829118067a75e7efd8a4d1fe739e38290ad535c31d82274e1c8289be0a00e1d37dad0351856da4e1392051b7be7bef407a9c4838b50f8a591da5a585fa8a8d31fbeccd2f3a133406823c358f9870e463e4c9105458aa287cd5902799791181b3f588c4cc044a2a02a191b8d7946091328e1f5edf69d8de18779d65ecc498aca05ffe3bcd28c6bede1ca3b0d877869376346897a2fdf32782743cd5ae5776b051e6caf6fc9f0c7b1c251174fa8eac65ad65bc72fdafe35d7c7a6e2f2642facf02ea7ef79f2c66aa0dc72514602c688079bd54f10dda70c6892b20f645b936ae6489766a4c34a46c79e0ef3245e4989207871fedb40f8daaaf1bc9ed0c34fa826d659c8e763e85dc35f4323cbd9251f9bfb7d144014ade63eafd033fdc30d97f70d1d05dfc16d568ada45203b27c27a5f572c410717e106a5ecb4ad3c6efb3660b27e8a4cb7b4d8c21079f09fc0720d3ac116182d4b2195ded9e18df0def983b57dd533f6534bdee481618e338306e9c10bff8b6e15de8012dee9b57f4a411cfb4e432f1d7c8db914e44e267def1fcb9fe94d949351442cd8a554e1f38a1db65506931acbd60511b7820bb52f738ddf8b50a91c13e3371dc471682f8ea2bc9e0dbc9f6e04ef176f27e15e358b538e18273b9adacb6530b23fe7cc45f06cd1b81d2648ce82c50f2bf06bb4b91e9cfa20db2eaeb827b208f666e9604d2a2218d02d4004071013f6a0eae6de7200873aff1c62f8871d2cc0d5783b697d3a3ed6c5a584a2c254d2cb205bdc78c2d7c5fd6b667c4612f141d07cd40ab62b88e670f9d34be8e879d2c1c29923dc5edfe757f2cc9465e51107ae2cc760332bb71c6476dcb63a18d2799bdfb2d224f1de456118c8116653403fdd4ec07aaacd0dd8277301a595646e73042ebbacf576b70453ff06cb8407ff79b9725de1464b6db94b1b6c7938274f344b0bee68849515c3fd18f1d949bc8f69b0ab9c4d9c7251e9e4627ac8377bd8fa1e1719924814afbef09327bc3cd676310da0cffd0e7c3f2f117498360d3dc4155782e9dd0d6ba0b7a5a21454ffa2b4204fde47c61d28de4bb98f1a5eb70ef35a8017913ede814451294a629f2772d04d687aa851c3b10059bfef43b44c6dc48fda0bad6655d7c6ed198a83734b2c8f33277e026696b046c3d310c9564bfe0d00a4147c30cb4a3e35665372c995ec69e5b0468c9b035bb3901e0da6c75bca84fb4cfe28261dfbfe4306d5efb1fa16f5e463b4b2a36fe2912414ff51342dc9125e5c257e55db4d470f562d9036c7599b0ba3e57a04a1474b55805f17dcce979f3db94a75eb6cae1333542ea86fb32dab7a7bf719ea137344ca1f7812cc7b8f635154c8557871920db6a92cd3dc21f8cbb4abb8ca2c6f99aad4bc5660f9db5d1a1151a4d5ce01d4c830bdecb6a3ce1e03679bac81b47c37c1ef8151077140157309c5ab781cb96d651f25eab8dfa64cd6974a34767d69dafbea0cc0c82ab7c0c5f4296b93b58a5873fdf6c6493701aaca9c4f6c5d6c7e94e7a72166dec23dfe5264a81858438fa92ec01c580025a9ecc57c70b566918dbd331bf4c0d41103e6aa8872d92cd6a14d9fd7740708b01ca20f52556014ecad2b8d3a5edb60bc1e20ea296ab3f28cc66077bee85f35bce43853ac89757c15e9b8f5a988fc30011da373bd76a44f0e1be88f320571a2f25e532eecf10ddaf1867166eeda946e8e44c9bc8de068bb302af5d70da7896816748e36b44a0a82c366ce89bf88809f284c894f17cd190d38c01ce352736e1d06b23bbd519c90c18b3e1285fd8219cb1c14382c072a17d49b38648e8a131b164eaf1df2e1d71b323bfc5f5cf0717d19d6e838a7fd77ae32db7fa71c4afc1222f482dd1c6892c9470f8e8194235d2e0bfb01a13340ce06cb6b179083aef14550792be72877da0e4561c1416034a370e517f877d482de8cd5b47334a0ec8895ab173267e738ae6a26bf4b9893e1eb82566949abea55966d071e302df42c3484b3bc1bf3404d6e08b036d95d0e424048923f6cfb8ed47648c61ffef7e0e0e3a7a2a04d03efa526d7f279cea7469b8d4cacdab5ee4106eff6c2ce8ad3380b465db79c6578867281f7097c05bdac0fe37f656af6f971598f9546bbdc22be3bdca0fc8036c4d1efd3ab078abf0105b69fff7147c682d9f17bc789e66d7e78a7444c6babd3b5a32573d7384d342f80ec23a64b3b7229f72c18827c78ca45bbf5ddeb302cf33c245415734e17ea682ad5923bbbd9b3b1140cfa789c082cad84d06c48a5bdbc000a8635fc600bbf21cea480b9910edf6201e1f592db02afdd2c9b031c6b23a5462afb6b56dc8d730538cd540befde6a8e77b90fa3d716217460757217d9290aa0ea13309472b1bed14b4a4d8ea04877fb562bb4ed8dcfa77cc856bd1303e1549177789927ada3cfb3be0f9cbc7e0a6a0a9c7f0a5b0632c43f610225cc6087fb3e01856ecd9386608f3dc9820e19df9d33bacacec729649bdb37220154e5fa38ac56518ee34412e4377d19696d123fa04bc067576218650072451b8595868fc25b57f38d596beaea09d46bcb87acce94d7fe88860076f63e714a8d6a1d8a5b2b96d426c9460d5ebd2a874399c8d735f337a35835f56c092e750dcb00130e966a0ada2b2aaaa95189d2d2996d1825e8108a431ff5b46431a8349134625153015fed469a804a76ec9a92a536e9e3a608bbf59dcf4ce854f86213616b766524c88b363f17f6218a064e6fb719cc56ba6fab07ef92b019dfa0edb80a26a3f64cf5bcaad68b506187d7ee15af63b07a91cf95f5ba41df9df7cfc601df201fd8dd4d4a16c17a3f2fd88b342ca213fbb00c11306573171c016b1621a38151529bcf1040b028ff152a2d9b5b8a4bbf4f026d79ee8f6c22b82413eac210a684ad9f36f75aaca88a03d506cc2a75a35c5f6ba6a2ffbbd976df17e5da8ab3d486bf312a1431a96f1217823dc0dffb572e72bc8097b7dde8506af0827489e511aa9f32ad9389a12498db410046eda675139035625e2efa6eeefd212eb2d741f2f50d83c845f43557ee1fc20b30760365d5ea9ce4e0bc19536eb968b88441fec30e6101aa5688afa932227af811439bb6736e117bcba0f34f0310a0dad3c28be589e4db47bac4085f76b105919879228564f53fa7d780dfdfcf76fed9752c7feae21b9525c00653cabb171b26a1df9ebd56b3d9a8a940d200e3f731457f87a684d20fd9207d1696d91dbfdd367165957268521ea506ecacf71e15b77c025d708c1232f904ffd5d76b3f5c14c2d976deb7fbe8449d20532b7b8f22f119847ce30bf5bc43b358ea83df35f2f81de49257c78092ef0d18cd41ddcf96f7b9e0483f6dbe8b36551db0858624724b1c1bfe20f6b03fcb8d0d0434b1cf2c776e18b850fea4561a4e9af3341f45348089bd0a1bdd97f40a807fcd5da12eb8094d9f5d7701d46f3a8fc9cb94f5bfecb087176c92751b8330320e717959d68397744261f61036a01e5ecbb778429879e4df2f43fb66cd81bd166d199f8557295911ff2e6f1bdb7b66799ebf4aa1cc2ce941926180c24ff497756fda22b0b8555129dcc9dbb2b46e59f10a8ab0700fdf2ba4cbe0af030291c080f59c6efd0f6d986a7f82b19d598f0d937b81e9e7b0edadf0e60fba4603eeb0793fe8f368ba8633145562c735b85bc73c82bc679c72332d53a803830d715b64cd3529671902eb7de3a2115007f54d3883bfb795710e0fcac9197a35fcdc2495ef92b0fd005cf0796d4cfe88c5933d2f35d020310b344551cd020d84dc9b8a8eee61d933e539afe4e1a0a9e4cfb7bb68d1013e8dccf06d6d8bb2851b13914391741c95a979b893b7d4d1505d34c01477db66d92fa155ad7166ec528a17139c968ec23f9f3a9ba5e72317bf482c1b746324df217f17e66cbff5e0d36516ed7f15fde344fd5bbc9422391d58cd7592bb46b52ab0d3682bc4ed68524f4506c0c8b12b5a13ca2054ce52522e3670747e6c4d5fe049865185e6500b450531d15e87daec8d4fdbd40d3b0e599e55f74ad99e85405ed77d7df7b39a8a20572011ce45eeaa9f3438eec1b684a37d2ffe75c6e9d25a4e8cbfa3096f22a12c2b1ef806f651c39766a9d0703f777783f2cf7472dc73eb52a86c5620a9d304365293fe0ea631646743563451845f193735385ebb983b73d99056ade70acabd9c4df5fbf09416e6c6c2b1c8577a059a96f7ec3f83b5bfc8f334cc3b9906d111d4ba8aa3e8e89827e602f9bbfc12076044b7677c42cfdd6058b629cac1c0e683d6aaa24f0184871315d87347c4f11d3093206a5da3afd711f145fbea16ef536064cc0bc2b30c0f63f60a301bcf3ec1dbdf5f74e4fa16de756be94565bf4c6d7f8673b10f2250b7e1977f258988f798c7f9e533fc501e2a12bcaddc9d9b10bc1c67cd56c7f951656793b5685103ded31f8641f8597bbf4f87faf4e292fc079139750d7f4fdfe8da155e13fa00854f9fda15d3fab4b81203870e5b771980b9365c0677f712b88affacc1585fe9286be1456a15f95eab5496c9b6d5a03254715b38403cca5138f101d1509315318953b9ff3f2c0e1fee915fc38eb5d56e15c6c1483277a981b9c7eabf74945fac6d18f2843a1b4bbff5dca5582d34c3e1333e6d4ea1bb5debb86f3131da4bd82b0b642ccac30b2acf03b5c8702d4faba26558cb8f676b3eb7717a90fcdfcc2c3ba1be6211c90c7c536b88d73e0ff49d8674a0753e704e193e7bd75630e5fb687247867f864eed360b7e30d0bd4b79b6593facefa22710de318ceae71c3b2dae8e6fab9de9d5571e0e3aa064a5b5fe8f1bf41244295b1e23db26ebf64473da62310a6311cac5cfdaff2433bbf9c34f25657569239121fe444d749dd2e6ec12b3ae5c40a1c20a722c5cca8701f2c112e6833a02dfa54c4afe6a072e95fac73da4daee479920598283173d79f0ec75c1b9e047bc3fbfcc23f7eb7d08a4fa6b155ad96b59e821db2801f2c50b581d54d2bfdb0a4059255f391f92dcf00a4b0bcbe81d9959852dd7969aaed1c6ea1097c4b412dd01d1a505782a68545c2fb7019d4145c0482a19bd1973741fb1d78c7b7574f2bddbaa14d0c38d0a726ffdf7241dbceb0ad24f44d47af8aaf880e7f666613e6cb200725af3cb59c4eb80b7af82c029299ceb355121630bc525bfb0c47a08a94dbc91258bd3a940d92da38143f5cdc1f529b1cf08eb565ecba41476a9239683c0124b74ca4e3c5259ab898917dadcc24663bc105238c9b7c18098d6bae67a553a58f9cfb69217a6185671162f1ce611d02d947344dce474412dccfde33ac84190b07d20503798a71289792099690e4ef5e771d3b759038ec21f85c7a0b35e39fcc93ed90146a87a236a95f3aeff6d282d843b97735410c27c222e7800ea6c7cce0cd5b6b8f24a1a0ad640532d5ea034b458ed0e97c36ef079958d5f9eb7991d0483e0b70b4aeb8e5e74295b103bf00db77454a07ad6267fb0a5bba4671de723bf3d519697598ea7dc72b5dcb9e25bff973c9575d9937e0df810f0f3a8ef1194c4f15a4d5cee23e3e2c1154b2ce1fafd6b4164aa7e42f8360ee5ff3ac6a4f17caabcbf2aa105ef20e13c76459c39efbc8ac767ef73d5b587fc21ac8c60f70ae6a07757263edc759064aa6c7fee679cf27ecdda9c997968cea1eb8a658d2cdf5f31b192eb4b3563d31f46cfb0bdd94287ddaafe7cce7dc610c57b56a7a983a73eb4ae1f835c781b148e9e7d9734d3a922b04ab401ae55b63e73a8b9f527e28a3fc92159a9a2932bbdc9383f43b286746b72b221eab91f73389a197279a37b890f5b224da412c3c79afba9c38e86cb56edba2d433acb67dd1e0382980ff87edd31cd8dfcb81de355c005780ab3b28324d09afd737d8c04d25b9a6d61cbc0bd1b70ed59c094b579e2ea22a094bbcba7b0aafc62a2abd63bcabda15e19be74fc4ef36a78eb42fa1552220dbf448eb52e20a6ac47f1b95d8c56265a9ca445e698fb31d1b3958706b37ca39666f57a30353bf3b5543052f9de4deafd6e6eed7fb3b151060433a2a8c83b81b679cfcb87ee24ff662546bd60a1a10ac88d6500b1e7d6521e44341984803a84df89b4eae80fb6fe27512b6e46b01885053403c5be2106940d03ac299807203123f7b08326be3a6ac9d5cdf0262c98aa710f3d1709a5050e4322135355281b627507a6965538b04ee4441d409162de78076ed321b5ef74d1824716abe8b7d442945579115db51d9e5bd19f9e9d717ac1e6781af332af7a04db6c3032ed2471856f118564618fd1cdf7de3274afbf7f2546d023ad5e79ecffdada95d0529177fb7b89f07cb04549a9a5eb05e176ab57a5e5ebf67e4617f7cd6e65f517ded71a07db92c407f7625e70f337aa43dda30187815b3b34e6984a30cdf0febae7e679900dec84091d7e7090c2c4e72b53d036b1a3c4e3fce8e623d65def0656067cf5d65954f2c3e609fdb684f5be3731d023d015bcb94895156dc095f93a60e025acfe14c4a08b0d77ebde71f037766fa91d18f6b1ce28452eb07736447d84b9e917a6f2162972a3a0f6e552aa3933be5cb666211a8ed63ada951c2e409ee4aa494733247d18a4909b6fd33b7d6c562b808fb7aebef37309c59636dda3ce5d1f5887dcb737d86a42fd4a123db7d31e44be501a1c19629586db97784e25f38c07e03e87413edc276081542957cbdc990604af4905dbbee2fcaba284a0e920d71fe041bb3e61d183714fd1622a0ab59a187697cab465ca996b18c5e81665dd2e59a01710d881359300201f33b477ac3892b00658b04e035fdbe3337563d3881308a30647b62ae178ce60b4e1855db52ad824def2ede4aef5e9f55f58051514fe06f48ed3ddee8d7f970e11624bdc5f65f727f229e7709a94d44e9c0912b90f80c35be5dc66e50a76ef05937c6053d13c9cfee5cead771a7b27ceddf9fa367cca4d7c666b9638d009639189e0b0f8fbb2348aed07d693aee31c15bff64d8736503d9971290f19f2373c81057b0751a890b1b3ceb03cc061fd6c85110651ae2d58ab073142a7876a94a005a3ab8a37de10cbdb16805c326bcd6e252ef338fb87ecdb248a0b920504e9cc797faed294b5b19bbc41937289d9a37d54aaf53656d9b069d08996cc17f8512cf84d8d258d62512ce6e36d227c59f86075fe3a6ba82febf615fbecca536786e7ba4d4ffa89434f640cc425eb32f29cb03548787a60c884cbc76842ab42a7ff9f6e545148d87262fae7e544356f9ff006ad6aa78cea3f9351693297b1effc569050a075110e9582bce8634bbbf4f415b03be9c8c41e1af38879081be313a265345ccb8ca50b5e16ee28f99500ac3abc910386da680fd7be412ec973d550add6063771699618dd6ca5e99e9808dcbc4bd103341a240cc9453f2a801b2026c38c3f69012ba39c6048ff1487a4f7e8a00b623b160156a325ca8d9f1ccd4bef8c26726ee339fe462ffa5ca0ba968a5483cc671225965022a40c64d870734bb5c9da5d5f2ace53b2b27cd20e86ea25b66b965ac59b951b407712a744eac4e58839eab2eb6b3c635c16f27e41a1340979ae8050799449d29bf90b8b275df248384f219e4f20e47898de36187148a213202549c0e9e7841a451e38f04e9022223d3a5a0b1302fb2a6b968952a0ead36b72cc76cdb4bbb459a745672cfaffe904601b5d5ec79324b92b26fbf77380356f1ead7d2e7382ffe127319b6c132e561c2e1995afe720fb22c67bb6a555a5ce42720a20047404f5ef569b75943311dad89c1550951c29c577fe9169277f3dee2e9e794dd2ba309f9fd8f2e6c338e29c2bc72107d3fd97de9a04c89b31003da3272d05753188e45c7bd49aff2f82874da5b4f754a277753e2c1cea0540e2788e78b380aecb871fea4c780f5615b6d0ecb1d091947e5345fd11419829a9ea158d1e929a7f2c923f58ef1a54e2f079e20aa5023a1e5e91cc9906e4c373dcc0c6e9fa64e1c32e1eefb2ea755fe5b3beec6ba999cba6d829074e8b177c60991a88cf971cb40d1283881b1fc55a86f36363752f0faeeb252b981e150900242c3835d215cafc9b9526b5a2c7ddda33f01c55ab4a9d226c70cc8af5c66facfa09419be1371c2eeaf559be9e96e93ae82f8a3bc8bdb407940c26b10fd9669167d63fac2b4ffbe1b8ef2f25c9593ff2d70d7db9a1a731924d742f962c4621b4011fc77676831aea148efc60ab75584c0402b79a317950830d0bf9f0842c32df40375ac2932359886f9751fe77e89f070c72671847d5a7f5a401fa1f9b9e1c3f59c01a9647e12cd13af7c2bfb1548d02d29bf242a502de29279bf7025913ff918b183bed0432f61be178e8d03ca21c65e024fce3edac0f7aeff15b4e3b1d2758f4b848f56dfb975bec69f7eecf3e418e9c5d982665589bc497573cf79f897ba9e5b69b4267946564d918d001bbd4616a8d0d211036ee1cd201d90f45c18c50093883f859e3ecc588bcee6c4f8e226c830f678aa34dc68d94a1350053054b39385deb7415b0ea920961213009522f208272e3f537f7643d94e6a6d0c473349d526e966b85212056ddda51094e6a330c46462e48055550028a13a6383700cdc4125ee5dd67bc254eb1dc98a7699c5047cfe43cf0d3dcdf8fad6cebc903498af40f930581fdfeee99528ba57e4da08aa55c7e8c5da526bf12b7e88b0be07a3069bee6767479c9e3495469a6668e592d5f52b9eed6a2f18200b8b68d78dc567fdc4b9ddfbaeb3e7330c7e83ec445076b559b55b94900ff245bb3f0a3faed6a3a590a7ddc6355ab99ac4414a1eaa2c19de6672401ce468c5dff61dc42033d4eeef8110ef3f94d74bf743a9ab747ef7021b54355d5f3cb7b5b3e4e494ee6c840883f539dcc1f1a61a9b1b4f598ad93f257b2b6612b134fc34e5b663e8b7dd297dcb5439e36a916ef0e73b6f312e8194973f1b86de30366598833a2eb02a20e1c0a9701f99293f7882438e7259710a1b15ab19cf74660a9346ff74a7f7874ed49bd18211bc8f6326f52afc68b4c0bd351672390d1c34e209b2eeb1032bc43e92fd05545c60d070ca205e0fb22eba8284a76698aed10b8ae5583a03b74178327472c1b76b2690aad8d788966c7d632359e6975cb288f3b9c2904e8e622c1d7219be484e49780a281fe9b30855e34ff64ccc238b7237f1360ec347e208facdf9bcc87409ec14b0c5ff37c86646ac3c226c5ceb7ddbde2bde20c8e6f4b646b36c059d16f338eedd905dd270419706db1b68cde7c9aaaa35d6aae2da9adfb9218f8af622e0d0528fb78fbaed34b3a3753be6c15e799eafc117d0d5a827b620f2c328a32ca9915d1b5980916be17b439b081ed905a070317897d22038ec71fdf5a1eee9eaac3cf96246fa82ab04672d31c93c405b3451c71925397dbee06e31e02d2dbf95b04c4f3e38f1408291760a884c76d5a7cedcd3cf56346607270b0d9dfb14f4165721737efa7fc4e97e83d9cef6db79d3e65d7280c57aadbfb160ae9718d8ab9b8fc363861f267c5fe9335c2fffe0d6da8b9a9ad0c564ba8f810cd279e93df1b5c5dd089f1bd4d33d5ce74d0c502ba57a8efd99a67ee9514d48e9e219a31850c293eace8cd3bf322a286b0d6320799dcccf5e64c6f72e55297fb152f3e1c63be66c6327662713c37da6b42d1b7ca3f806530db637125a65bd2db9c2c772aecd136e99d99da34e982eb421f07cbfc30048e948f39e78856e103a46126884a165928e2d59553070a83b13af5cd530ac7c4a02910b54cf89f641e327ec334e61fb1d7506eaedb051b668e8edada5ed5f8aa949e971f4f32a626aa0c4f2c0a8bd0f716ede6c0ca1f9d4cea3e44338f47ee412236f738c6f52e3c3f3a1d957926ac52b5b0e46d33316d547552a03c86694f913723f955fa492176944f90762ce058010736d0cb13aa41c0520ab0febeff0ca8e0fddfb2fc41eebdb01d1315bac83779a7784fbe7dcc732524d10d2fabb35bb5762ec9ccbe6d35034ea976c48c37d2cd32db07de4857a65e8bd94fe1072e519e190c1cc159e2e3a48e43374afa5174f352dd8984fce66aa89624da54a43dd6ab1da997d58fe0a59f601f20ea44626198821bae5e31c607da7538ac0dfe9211005b19e2afc8e8fff46048e5d1b37ca02a99f7ea5fb68f2d1ede3b09a942f830894122d8aaf21638ee193ed69523c809d431e00a12ba426a1fef2561aed2b7e03a034dc253ef07f0c3282fc6810bb6124f6692ec06983a7b6906b0d4c05a30af1da648c4ce7a5270192258767b1f5592cbad902be732660330f8ef40d925430f65ec247d41a2c39f6a2305944320977d2fe211cd4e127177cb483696e3b158df0c7c3433b7228dff2be1e1da10cde6fdeb47c321c14094aa3301664b099c0f703313b5ea72f03bce7abb13a7f60057bc792d739b3dceb711","isRememberEnabled":true,"rememberDurationInDays":0,"staticryptSaltUniqueVariableName":"a9204f3c75ae37d096a0c036d64bb1fb"};

            // you can edit these values to customize some of the behavior of StatiCrypt
            const templateConfig = {
                rememberExpirationKey: "staticrypt_expiration",
                rememberPassphraseKey: "staticrypt_passphrase",
                replaceHtmlCallback: null,
                clearLocalStorageCallback: null,
            };

            // init the staticrypt engine
            const staticrypt = staticryptInitiator.init(staticryptConfig, templateConfig);

            // try to automatically decrypt on load if there is a saved password
            window.onload = async function () {
                const { isSuccessful } = await staticrypt.handleDecryptOnLoad();

                // if we didn't decrypt anything on load, show the password prompt. Otherwise the content has already been
                // replaced, no need to do anything
                if (!isSuccessful) {
                    // hide loading screen
                    document.getElementById("staticrypt_loading").classList.add("hidden");
                    document.getElementById("staticrypt_content").classList.remove("hidden");
                    document.getElementById("staticrypt-password").focus();

                    // show the remember me checkbox
                    if (isRememberEnabled) {
                        document.getElementById("staticrypt-remember-label").classList.remove("hidden");
                    }
                }
            };

            // toggle password visibility
            const toggleIcon = document.querySelector(".staticrypt-toggle-password-visibility");
            // these two icons are coming from FontAwesome
            const imgSrcEyeClosed =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA2NDAgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTM4LjggNS4xQzI4LjQtMy4xIDEzLjMtMS4yIDUuMSA5LjJTLTEuMiAzNC43IDkuMiA0Mi45bDU5MiA0NjRjMTAuNCA4LjIgMjUuNSA2LjMgMzMuNy00LjFzNi4zLTI1LjUtNC4xLTMzLjdMNTI1LjYgMzg2LjdjMzkuNi00MC42IDY2LjQtODYuMSA3OS45LTExOC40YzMuMy03LjkgMy4zLTE2LjcgMC0yNC42Yy0xNC45LTM1LjctNDYuMi04Ny43LTkzLTEzMS4xQzQ2NS41IDY4LjggNDAwLjggMzIgMzIwIDMyYy02OC4yIDAtMTI1IDI2LjMtMTY5LjMgNjAuOEwzOC44IDUuMXpNMjIzLjEgMTQ5LjVDMjQ4LjYgMTI2LjIgMjgyLjcgMTEyIDMyMCAxMTJjNzkuNSAwIDE0NCA2NC41IDE0NCAxNDRjMCAyNC45LTYuMyA0OC4zLTE3LjQgNjguN0w0MDggMjk0LjVjOC40LTE5LjMgMTAuNi00MS40IDQuOC02My4zYy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM2MwIDEwLjItMi40IDE5LjgtNi42IDI4LjNsLTkwLjMtNzAuOHpNMzczIDM4OS45Yy0xNi40IDYuNS0zNC4zIDEwLjEtNTMgMTAuMWMtNzkuNSAwLTE0NC02NC41LTE0NC0xNDRjMC02LjkgLjUtMTMuNiAxLjQtMjAuMkw4My4xIDE2MS41QzYwLjMgMTkxLjIgNDQgMjIwLjggMzQuNSAyNDMuN2MtMy4zIDcuOS0zLjMgMTYuNyAwIDI0LjZjMTQuOSAzNS43IDQ2LjIgODcuNyA5MyAxMzEuMUMxNzQuNSA0NDMuMiAyMzkuMiA0ODAgMzIwIDQ4MGM0Ny44IDAgODkuOS0xMi45IDEyNi4yLTMyLjVMMzczIDM4OS45eiIvPjwvc3ZnPg==";
            const imgSrcEyeOpened =
                "data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA1NzYgNTEyIj48IS0tIUZvbnQgQXdlc29tZSBGcmVlIDYuNS4yIGJ5IEBmb250YXdlc29tZSAtIGh0dHBzOi8vZm9udGF3ZXNvbWUuY29tIExpY2Vuc2UgLSBodHRwczovL2ZvbnRhd2Vzb21lLmNvbS9saWNlbnNlL2ZyZWUgQ29weXJpZ2h0IDIwMjQgRm9udGljb25zLCBJbmMuLS0+PHBhdGggZD0iTTI4OCAzMmMtODAuOCAwLTE0NS41IDM2LjgtMTkyLjYgODAuNkM0OC42IDE1NiAxNy4zIDIwOCAyLjUgMjQzLjdjLTMuMyA3LjktMy4zIDE2LjcgMCAyNC42QzE3LjMgMzA0IDQ4LjYgMzU2IDk1LjQgMzk5LjRDMTQyLjUgNDQzLjIgMjA3LjIgNDgwIDI4OCA0ODBzMTQ1LjUtMzYuOCAxOTIuNi04MC42YzQ2LjgtNDMuNSA3OC4xLTk1LjQgOTMtMTMxLjFjMy4zLTcuOSAzLjMtMTYuNyAwLTI0LjZjLTE0LjktMzUuNy00Ni4yLTg3LjctOTMtMTMxLjFDNDMzLjUgNjguOCAzNjguOCAzMiAyODggMzJ6TTE0NCAyNTZhMTQ0IDE0NCAwIDEgMSAyODggMCAxNDQgMTQ0IDAgMSAxIC0yODggMHptMTQ0LTY0YzAgMzUuMy0yOC43IDY0LTY0IDY0Yy03LjEgMC0xMy45LTEuMi0yMC4zLTMuM2MtNS41LTEuOC0xMS45IDEuNi0xMS43IDcuNGMuMyA2LjkgMS4zIDEzLjggMy4yIDIwLjdjMTMuNyA1MS4yIDY2LjQgODEuNiAxMTcuNiA2Ny45czgxLjYtNjYuNCA2Ny45LTExNy42Yy0xMS4xLTQxLjUtNDcuOC02OS40LTg4LjYtNzEuMWMtNS44LS4yLTkuMiA2LjEtNy40IDExLjdjMi4xIDYuNCAzLjMgMTMuMiAzLjMgMjAuM3oiLz48L3N2Zz4=";
            toggleIcon.addEventListener("click", function () {
                const passwordInput = document.getElementById("staticrypt-password");
                if (passwordInput.type === "password") {
                    passwordInput.type = "text";
                    toggleIcon.src = imgSrcEyeOpened;
                    toggleIcon.alt = templateToggleAltHide;
                    toggleIcon.title = templateToggleAltHide;
                } else {
                    passwordInput.type = "password";
                    toggleIcon.src = imgSrcEyeClosed;
                    toggleIcon.alt = templateToggleAltShow;
                    toggleIcon.title = templateToggleAltShow;
                }
            });

            // handle password form submission
            document.getElementById("staticrypt-form").addEventListener("submit", async function (e) {
                e.preventDefault();

                const password = document.getElementById("staticrypt-password").value,
                    isRememberChecked = document.getElementById("staticrypt-remember").checked;

                const { isSuccessful } = await staticrypt.handleDecryptionOfPage(password, isRememberChecked);

                if (!isSuccessful) {
                    alert(templateError);
                }
            });
        </script>
    </body>
</html>
